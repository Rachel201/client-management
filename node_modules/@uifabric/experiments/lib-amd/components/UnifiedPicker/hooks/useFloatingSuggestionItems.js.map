{"version":3,"file":"useFloatingSuggestionItems.js","sourceRoot":"../src/","sources":["components/UnifiedPicker/hooks/useFloatingSuggestionItems.ts"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { IFloatingSuggestionsHeaderFooterProps } from '../../FloatingSuggestionsComposite/FloatingSuggestionsHeaderFooterItem/FloatingSuggestionsHeaderFooterItem.types';\n\nexport interface IUseFloatingSuggestionItems<T> {\n  focusItemIndex: number;\n  setFocusItemIndex: React.Dispatch<React.SetStateAction<number>>;\n  suggestionItems: T[];\n  setSuggestionItems: React.Dispatch<React.SetStateAction<T[]>>;\n  footerItemIndex: number;\n  setfooterItemIndex: React.Dispatch<React.SetStateAction<number>>;\n  footerItems: IFloatingSuggestionsHeaderFooterProps[];\n  setFooterItems: React.Dispatch<React.SetStateAction<IFloatingSuggestionsHeaderFooterProps[]>>;\n  headerItemIndex: number;\n  setHeaderItemIndex: React.Dispatch<React.SetStateAction<number>>;\n  headerItems: IFloatingSuggestionsHeaderFooterProps[];\n  setHeaderItems: React.Dispatch<React.SetStateAction<IFloatingSuggestionsHeaderFooterProps[]>>;\n  isSuggestionsShown: boolean;\n  showPicker: (show: boolean) => void;\n  selectNextSuggestion: () => void;\n  selectPreviousSuggestion: () => void;\n  getFocusedSuggestion: () => T;\n  hasSuggestionSelected: () => void;\n  removeSuggestion: (index: number) => void;\n  clearPickerSelectedIndex: () => void;\n  queryString: string;\n  setQueryString: (queryString: string) => void;\n}\n\nexport const useFloatingSuggestionItems = <T extends {}>(\n  floatingSuggestionItems: T[],\n  footerSuggestionItems?: IFloatingSuggestionsHeaderFooterProps[],\n  headerSuggestionItems?: IFloatingSuggestionsHeaderFooterProps[],\n  focusSuggestionIndex?: number,\n  focusFooterIndex?: number,\n  focusHeaderIndex?: number,\n  isSuggestionsVisible?: boolean,\n  initialQueryString?: string,\n) => {\n  const [focusItemIndex, setFocusItemIndex] = React.useState(focusSuggestionIndex || -1);\n  const [suggestionItems, setSuggestionItems] = React.useState(floatingSuggestionItems);\n  const [footerItemIndex, setFooterItemIndex] = React.useState(focusFooterIndex || -1);\n  const [footerItems, setFooterItems] = React.useState(footerSuggestionItems);\n  const [headerItemIndex, setHeaderItemIndex] = React.useState(focusHeaderIndex || -1);\n  const [headerItems, setHeaderItems] = React.useState(headerSuggestionItems);\n  const [isSuggestionsShown, setIsSuggestionsShown] = React.useState(isSuggestionsVisible || false);\n  const [queryString, setQueryString] = React.useState(initialQueryString || '');\n\n  React.useEffect(() => {\n    setSuggestionItems(floatingSuggestionItems);\n    // If we have a query string and suggestions, set the first one as selected\n    if (queryString !== '' && floatingSuggestionItems && floatingSuggestionItems.length > 0) {\n      setFocusItemIndex(0);\n      setHeaderItemIndex(-1);\n      setFooterItemIndex(-1);\n    }\n    // Otherwise clear the selection\n    else {\n      clearPickerSelectedIndex();\n    }\n  }, [floatingSuggestionItems, queryString]);\n\n  const headerFooterItemsHaveExecute = (items: IFloatingSuggestionsHeaderFooterProps[]): boolean => {\n    let haveExecute = false;\n    items!.forEach(item => {\n      if (item.onExecute !== undefined) {\n        haveExecute = true;\n      }\n    });\n    return haveExecute;\n  };\n\n  const hasSelectableFooters = footerItems ? headerFooterItemsHaveExecute(footerItems) : false;\n  const hasSelectableHeaders = headerItems ? headerFooterItemsHaveExecute(headerItems) : false;\n\n  const getNextSelectableHeaderOrFooter = (\n    items: IFloatingSuggestionsHeaderFooterProps[],\n    itemIndex: number,\n  ): number => {\n    let nextIndex = -1;\n    if (items) {\n      let i = itemIndex + 1;\n      while (i < items.length) {\n        if (items[i].onExecute && items[i].shouldShow()) {\n          nextIndex = i;\n          i = items.length;\n        }\n        i++;\n      }\n    }\n    return nextIndex;\n  };\n\n  const getPreviousSelectableHeaderOrFooter = (\n    items: IFloatingSuggestionsHeaderFooterProps[],\n    itemIndex: number,\n  ): number => {\n    let nextIndex = -1;\n    if (items) {\n      let i = itemIndex !== -1 ? itemIndex - 1 : items.length - 1;\n      while (i > -1) {\n        if (items[i].onExecute && items[i].shouldShow()) {\n          nextIndex = i;\n          i = -1;\n        }\n        i--;\n      }\n    }\n    return nextIndex;\n  };\n\n  const showPicker = (show: boolean) => {\n    clearPickerSelectedIndex();\n    setIsSuggestionsShown(show);\n  };\n\n  const selectNextSuggestion = (): void => {\n    // We're currently selected on a header\n    if (headerItemIndex > -1) {\n      // First, try and find another header\n      const nextHeaderIndex = getNextSelectableHeaderOrFooter(headerItems!, headerItemIndex);\n      if (nextHeaderIndex !== -1) {\n        setHeaderItemIndex(nextHeaderIndex);\n      } else {\n        // select the first suggestion item\n        setHeaderItemIndex(-1);\n        if (suggestionItems && suggestionItems.length > 0) {\n          // select the first suggestion item\n          setFocusItemIndex(0);\n        } else if (hasSelectableFooters) {\n          setFooterItemIndex(getNextSelectableHeaderOrFooter(footerItems!, footerItemIndex));\n        }\n      }\n    }\n    // We're currently selected on a selected item\n    else if (focusItemIndex > -1) {\n      // If we're at the end of the list\n      if (focusItemIndex === suggestionItems.length - 1) {\n        if (hasSelectableFooters) {\n          setFooterItemIndex(getNextSelectableHeaderOrFooter(footerItems!, footerItemIndex));\n          setFocusItemIndex(-1);\n        } else if (hasSelectableHeaders) {\n          setHeaderItemIndex(getNextSelectableHeaderOrFooter(headerItems!, headerItemIndex));\n          setFocusItemIndex(-1);\n        } else {\n          setFocusItemIndex(0);\n        }\n      } else {\n        setFocusItemIndex(focusItemIndex + 1);\n      }\n    }\n    // We're currently selected on a footer\n    else if (footerItemIndex > -1) {\n      // First, try and find another footer\n      const nextFooterIndex = getNextSelectableHeaderOrFooter(footerItems!, footerItemIndex);\n      if (nextFooterIndex !== -1) {\n        setFooterItemIndex(nextFooterIndex);\n      } else {\n        setFooterItemIndex(-1);\n        if (hasSelectableHeaders) {\n          setHeaderItemIndex(getNextSelectableHeaderOrFooter(headerItems!, headerItemIndex));\n        } else if (suggestionItems && suggestionItems.length > 0) {\n          // select the first suggestion item\n          setFocusItemIndex(0);\n        }\n      }\n    }\n    // else, we have no items selected, so select the first one available\n    else {\n      if (hasSelectableHeaders) {\n        setHeaderItemIndex(getNextSelectableHeaderOrFooter(headerItems!, headerItemIndex));\n      } else if (suggestionItems && suggestionItems.length > 0) {\n        // select the first suggestion item\n        setFocusItemIndex(0);\n      } else if (hasSelectableFooters) {\n        setFooterItemIndex(getNextSelectableHeaderOrFooter(footerItems!, footerItemIndex));\n      }\n      // else, we stay in the state with nothing selected\n    }\n  };\n\n  const selectPreviousSuggestion = (): void => {\n    // We're currently selected on a footer\n    if (footerItemIndex > -1) {\n      // First, try and find another footer\n      const previousFooterIndex = getPreviousSelectableHeaderOrFooter(footerItems!, footerItemIndex);\n      if (previousFooterIndex !== -1) {\n        setFooterItemIndex(previousFooterIndex);\n      } else {\n        setFooterItemIndex(-1);\n        if (suggestionItems && suggestionItems.length > 0) {\n          // select the first suggestion item\n          setFocusItemIndex(suggestionItems.length - 1);\n        } else if (hasSelectableHeaders) {\n          setHeaderItemIndex(getPreviousSelectableHeaderOrFooter(headerItems!, headerItemIndex));\n        }\n      }\n    }\n    // We're currently selected on a selected item\n    else if (focusItemIndex > -1) {\n      // If we're at the beginning of the list\n      if (focusItemIndex === 0) {\n        setFocusItemIndex(-1);\n        if (hasSelectableHeaders) {\n          setHeaderItemIndex(getPreviousSelectableHeaderOrFooter(headerItems!, headerItemIndex));\n        } else if (hasSelectableFooters) {\n          setFooterItemIndex(getPreviousSelectableHeaderOrFooter(footerItems!, footerItemIndex));\n        } else {\n          setFocusItemIndex(suggestionItems.length - 1);\n        }\n      } else {\n        setFocusItemIndex(focusItemIndex - 1);\n      }\n    }\n    // We're currently selected on a header\n    else if (headerItemIndex > -1) {\n      // First, try and find another header\n      const nextHeaderIndex = getPreviousSelectableHeaderOrFooter(headerItems!, headerItemIndex);\n      if (nextHeaderIndex !== -1) {\n        setHeaderItemIndex(nextHeaderIndex);\n      } else {\n        // select the first suggestion item\n        setHeaderItemIndex(-1);\n        if (hasSelectableFooters) {\n          setFooterItemIndex(getPreviousSelectableHeaderOrFooter(footerItems!, footerItemIndex));\n        } else if (suggestionItems && suggestionItems.length > 0) {\n          // select the first suggestion item\n          setFocusItemIndex(suggestionItems.length - 1);\n        }\n      }\n    }\n    // else, we have no items selected, so select the last one available\n    else {\n      if (hasSelectableFooters) {\n        setFooterItemIndex(getPreviousSelectableHeaderOrFooter(footerItems!, footerItemIndex));\n      } else if (suggestionItems && suggestionItems.length > 0) {\n        // select the last suggestion item\n        setFocusItemIndex(suggestionItems.length - 1);\n      } else if (hasSelectableHeaders) {\n        setHeaderItemIndex(getPreviousSelectableHeaderOrFooter(headerItems!, headerItemIndex));\n      }\n      // else, we stay in the state with nothing selected\n    }\n  };\n\n  const getFocusedSuggestion = (): T => {\n    return suggestionItems[focusItemIndex];\n  };\n\n  const hasSuggestionSelected = (): boolean => {\n    return focusItemIndex !== -1 && focusItemIndex < suggestionItems.length;\n  };\n\n  const removeSuggestion = (index: number): void => {\n    const currentSuggestions = [...suggestionItems];\n    const updatedSuggestions = currentSuggestions.splice(index, 1);\n    setSuggestionItems(updatedSuggestions);\n  };\n\n  const clearPickerSelectedIndex = (): void => {\n    setFocusItemIndex(-1);\n    setFooterItemIndex(-1);\n    setHeaderItemIndex(-1);\n  };\n\n  return {\n    focusItemIndex: focusItemIndex,\n    setFocusItemIndex: setFocusItemIndex,\n    suggestionItems: suggestionItems,\n    setSuggestionItems: setSuggestionItems,\n    footerItemIndex: footerItemIndex,\n    setFooterItemIndex: setFooterItemIndex,\n    footerItems: footerItems,\n    setFooterItems: setFooterItems,\n    headerItemIndex: headerItemIndex,\n    setHeaderItemIndex: setHeaderItemIndex,\n    headerItems: headerItems,\n    setHeaderItems: setHeaderItems,\n    isSuggestionsShown: isSuggestionsShown,\n    showPicker: showPicker,\n    selectNextSuggestion: selectNextSuggestion,\n    selectPreviousSuggestion: selectPreviousSuggestion,\n    getFocusedSuggestion: getFocusedSuggestion,\n    hasSuggestionSelected: hasSuggestionSelected,\n    removeSuggestion: removeSuggestion,\n    clearPickerSelectedIndex: clearPickerSelectedIndex,\n    queryString: queryString,\n    setQueryString: setQueryString,\n  };\n};\n"]}
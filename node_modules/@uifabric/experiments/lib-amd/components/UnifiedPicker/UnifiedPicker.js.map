{"version":3,"file":"UnifiedPicker.js","sourceRoot":"../src/","sources":["components/UnifiedPicker/UnifiedPicker.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { getStyles } from './UnifiedPicker.styles';\nimport { classNamesFunction, css, SelectionMode, Selection, KeyCodes } from '../../Utilities';\nimport { DragDropHelper } from 'office-ui-fabric-react/lib/utilities/dragdrop/DragDropHelper';\nimport { IUnifiedPickerStyleProps, IUnifiedPickerStyles } from './UnifiedPicker.styles';\nimport {\n  FocusZoneDirection,\n  FocusZone,\n  SelectionZone,\n  Autofill,\n  IInputProps,\n  IDragDropEvents,\n} from 'office-ui-fabric-react';\nimport { IUnifiedPickerProps } from './UnifiedPicker.types';\nimport { useFloatingSuggestionItems } from './hooks/useFloatingSuggestionItems';\nimport { useSelectedItems } from './hooks/useSelectedItems';\nimport { IFloatingSuggestionItemProps } from '../../FloatingSuggestionsComposite';\nimport { getTheme } from 'office-ui-fabric-react/lib/Styling';\nimport { mergeStyles } from '@uifabric/merge-styles';\nimport { IDragDropContext } from 'office-ui-fabric-react/lib/utilities/dragdrop/interfaces';\nimport { getRTL } from 'office-ui-fabric-react/lib/Utilities';\n\nexport const UnifiedPicker = <T extends {}>(props: IUnifiedPickerProps<T>): JSX.Element => {\n  const getClassNames = classNamesFunction<IUnifiedPickerStyleProps, IUnifiedPickerStyles>();\n  const classNames = getClassNames(getStyles);\n\n  const {\n    dragDropEvents,\n    onKeyDown,\n    onDropAutoFill,\n    onPaste,\n    className,\n    focusZoneProps,\n    inputProps,\n    onRenderSelectedItems,\n    selectedItemsListProps,\n    onRenderFloatingSuggestions,\n    floatingSuggestionProps,\n    headerComponent,\n    onInputChange,\n    customClipboardType,\n    onValidateInput,\n  } = props;\n\n  const {\n    pickerWidth,\n    suggestions,\n    selectedSuggestionIndex,\n    selectedFooterIndex,\n    selectedHeaderIndex,\n    pickerSuggestionsProps,\n    isSuggestionsVisible,\n    onSuggestionSelected,\n    onFloatingSuggestionsDismiss,\n    onRemoveSuggestion,\n  } = props.floatingSuggestionProps;\n\n  const {\n    onItemsRemoved: selectedItemsListOnItemsRemoved,\n    dropItemsAt: selectedItemsListDropItemsAt,\n    getItemCopyText: selectedItemsListGetItemCopyText,\n    replaceItem: selectedItemsListReplaceItem,\n    itemsAreEqual,\n    deserializeItemsFromDrop,\n    serializeItemsForDrag,\n    createGenericItem,\n  } = props.selectedItemsListProps;\n\n  const { onClick: inputPropsOnClick, onFocus: inputPropsOnFocus } = props.inputProps || {};\n\n  const rootRef = React.createRef<HTMLDivElement>();\n  const input = React.useRef<Autofill>(null);\n  const [selection, setSelection] = React.useState(new Selection({ onSelectionChanged: () => _onSelectionChanged() }));\n  const [focusedItemIndices, setFocusedItemIndices] = React.useState(selection.getSelectedIndices() || []);\n\n  const [draggedIndex, setDraggedIndex] = React.useState<number>(-1);\n  const dragDropHelper = new DragDropHelper({\n    selection: selection,\n  });\n\n  const {\n    focusItemIndex,\n    suggestionItems,\n    footerItemIndex,\n    footerItems,\n    headerItemIndex,\n    headerItems,\n    isSuggestionsShown,\n    showPicker,\n    selectPreviousSuggestion,\n    selectNextSuggestion,\n    queryString,\n    setQueryString,\n  } = useFloatingSuggestionItems(\n    suggestions,\n    pickerSuggestionsProps?.footerItemsProps,\n    pickerSuggestionsProps?.headerItemsProps,\n    selectedSuggestionIndex,\n    selectedFooterIndex,\n    selectedHeaderIndex,\n    isSuggestionsVisible,\n  );\n\n  const {\n    selectedItems,\n    addItems,\n    dropItemsAt,\n    removeItems,\n    removeItemAt,\n    removeSelectedItems,\n    unselectAll,\n    getSelectedItems,\n    setSelectedItems,\n  } = useSelectedItems(selection, props.selectedItemsListProps.selectedItems);\n\n  const _onSelectionChanged = () => {\n    showPicker(false);\n    setSelection(selection);\n    setFocusedItemIndices(selection.getSelectedIndices());\n  };\n\n  const defaultDragDropEnabled = props.defaultDragDropEnabled !== undefined ? props.defaultDragDropEnabled : true;\n\n  const autofillDragDropEnabled =\n    props.autofillDragDropEnabled !== undefined ? props.autofillDragDropEnabled : defaultDragDropEnabled;\n\n  React.useImperativeHandle(props.componentRef, () => ({\n    clearInput: () => {\n      if (input.current) {\n        input.current.clear();\n      }\n    },\n    focus: () => {\n      if (input.current) {\n        input.current.focus();\n      }\n    },\n    getSelectedItems: () => {\n      return getSelectedItems() as T[];\n    },\n    forceResolve: () => {\n      if (focusItemIndex >= 0) {\n        _onSuggestionSelected(undefined, suggestionItems[focusItemIndex]);\n        return true;\n      } else {\n        return false;\n      }\n    },\n  }));\n\n  // All of the drag drop functions are the default behavior. Users can override that by setting the dragDropEvents prop\n  const theme = getTheme();\n  const dragEnterClass = mergeStyles({\n    backgroundColor: theme.palette.neutralLight,\n  });\n\n  const _onDragEnter = (item?: any, event?: DragEvent): string => {\n    // return string is the css classes that will be added to the entering element.\n    return dragEnterClass;\n  };\n\n  let insertIndex = -1;\n  let isInDropAction = false;\n  const _dropItemsAt = (newItems: T[]): void => {\n    let indicesToRemove: number[] = [];\n    // If we are moving items within the same picker, remove them from their old places as well\n    if (draggedIndex > -1) {\n      indicesToRemove = focusedItemIndices.includes(draggedIndex) ? [...focusedItemIndices] : [draggedIndex];\n    }\n    selectedItemsListDropItemsAt?.(insertIndex, newItems, indicesToRemove);\n    dropItemsAt(insertIndex, newItems, indicesToRemove);\n    unselectAll();\n    insertIndex = -1;\n    isInDropAction = false;\n  };\n\n  const _onDragOverAutofill = (event?: React.DragEvent<HTMLDivElement>) => {\n    if (autofillDragDropEnabled) {\n      event?.preventDefault();\n    }\n  };\n\n  const _onDropAutoFill = (event?: React.DragEvent<HTMLDivElement>) => {\n    isInDropAction = true;\n    event?.preventDefault();\n    if (onDropAutoFill) {\n      onDropAutoFill(event);\n    } else {\n      insertIndex = selectedItems.length;\n      _onDropInner(event?.dataTransfer);\n    }\n  };\n\n  const _canDrop = (dropContext?: IDragDropContext, dragContext?: IDragDropContext): boolean => {\n    return defaultDragDropEnabled && !focusedItemIndices.includes(dropContext!.index);\n  };\n\n  const _onDropList = (item?: any, event?: DragEvent): void => {\n    isInDropAction = true;\n    /* indexOf compares using strict equality\n       if the item is something where properties can change frequently, then the\n       itemsAreEqual prop should be overloaded\n       Otherwise it's possible for the indexOf check to fail and return -1 */\n    if (itemsAreEqual) {\n      insertIndex = selectedItems.findIndex(currentItem => (itemsAreEqual ? itemsAreEqual(currentItem, item) : false));\n    } else {\n      insertIndex = selectedItems.indexOf(item);\n    }\n\n    // If the drop is in the right half of the item, we want to drop at index+1\n    if (event && event.currentTarget) {\n      const targetElement = event.currentTarget as HTMLElement;\n      const halfwayPoint = targetElement.offsetLeft + targetElement.offsetWidth / 2;\n      if (getRTL()) {\n        if (event.pageX < halfwayPoint) {\n          insertIndex++;\n        }\n      } else {\n        if (event.pageX > halfwayPoint) {\n          insertIndex++;\n        }\n      }\n    }\n\n    event?.preventDefault();\n    _onDropInner(event?.dataTransfer !== null ? event?.dataTransfer : undefined);\n  };\n\n  const _onDropInner = (dataTransfer?: DataTransfer): void => {\n    let isDropHandled = false;\n    if (dataTransfer) {\n      const data = dataTransfer.items;\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].kind === 'string' && data[i].type === customClipboardType) {\n          isDropHandled = true;\n          data[i].getAsString((dropText: string) => {\n            if (deserializeItemsFromDrop) {\n              const newItems = deserializeItemsFromDrop(dropText);\n              _dropItemsAt(newItems);\n            }\n          });\n        }\n      }\n    }\n    if (!isDropHandled && draggedIndex > -1) {\n      const newItems = focusedItemIndices.includes(draggedIndex)\n        ? (getSelectedItems() as T[])\n        : [selectedItems[draggedIndex]];\n      _dropItemsAt(newItems);\n    }\n  };\n\n  const _onDragStart = (item?: any, itemIndex?: number, tempSelectedItems?: any[], event?: DragEvent): void => {\n    /* eslint-disable-next-line eqeqeq */\n    const draggedItemIndex = itemIndex != null ? itemIndex! : -1;\n    setDraggedIndex(draggedItemIndex);\n    // Set effectAllowed to be only move so that browser doesn't incorrectly copy instead\n    if (event && event.dataTransfer) {\n      event.dataTransfer.effectAllowed = 'move';\n    }\n    if (event) {\n      const dataList = event?.dataTransfer?.items;\n      if (serializeItemsForDrag && customClipboardType) {\n        const draggedItems = focusedItemIndices.includes(draggedItemIndex) ? [...getSelectedItems()] : [item];\n        const dragText = serializeItemsForDrag(draggedItems);\n        dataList?.add(dragText, customClipboardType);\n      }\n    }\n  };\n\n  const _onDragEnd = (item?: any, event?: DragEvent): void => {\n    // Because these calls are async, it's possible for us to get the drag end call while\n    // we're in the middle of a drop action, so don't run the delete code if that's the case\n    if (event && !isInDropAction) {\n      // If we have a move event, and we still have selected items (indicating that we\n      // haven't already moved items within the well) we should remove the item(s)\n      if (event.dataTransfer?.dropEffect === 'move' && focusedItemIndices.length > 0) {\n        const itemsToRemove = focusedItemIndices.includes(draggedIndex)\n          ? (getSelectedItems() as T[])\n          : [selectedItems[draggedIndex]];\n        _onRemoveSelectedItems(itemsToRemove);\n      }\n      // Clear any remaining drag data\n      const dataList = event?.dataTransfer?.items;\n      dataList?.clear();\n    }\n    setDraggedIndex(-1);\n    isInDropAction = false;\n  };\n\n  const defaultDragDropEvents: IDragDropEvents = {\n    canDrop: _canDrop,\n    canDrag: () => defaultDragDropEnabled,\n    onDragEnter: _onDragEnter,\n    onDragLeave: () => undefined,\n    onDrop: _onDropList,\n    onDragStart: _onDragStart,\n    onDragEnd: _onDragEnd,\n  };\n\n  const _onSuggestionSelected = React.useCallback(\n    (ev: any, item: IFloatingSuggestionItemProps<T>) => {\n      addItems([item.item]);\n      onSuggestionSelected?.(ev, item);\n      if (input.current) {\n        input.current.clear();\n      }\n      showPicker(false);\n    },\n    [addItems, onSuggestionSelected, showPicker],\n  );\n\n  const _onKeyDown = React.useCallback(\n    (ev: React.KeyboardEvent<HTMLDivElement>) => {\n      // Allow the caller to handle the key down\n      onKeyDown?.(ev);\n\n      // This is a temporary work around, it has localization issues\n      // we plan on rewriting how this works in the future\n      const isDel = ev.which === KeyCodes.del;\n      const isCut = (ev.shiftKey && isDel) || (ev.ctrlKey && ev.which === KeyCodes.x);\n      const isBackspace = ev.which === KeyCodes.backspace;\n      const isCopy = ev.ctrlKey && ev.which === KeyCodes.c;\n      const needToCopy = isCut || isCopy;\n      const needToDelete =\n        (isBackspace && selectedItems.length > 0) || ((isCut || isDel) && focusedItemIndices.length > 0);\n\n      // Handle copy (or cut) if focus is in the selected items list\n      if (needToCopy) {\n        if (focusedItemIndices.length > 0 && selectedItemsListGetItemCopyText) {\n          ev.preventDefault();\n          const copyItems = selection.getSelection() as T[];\n          const copyString = selectedItemsListGetItemCopyText(copyItems);\n          navigator.clipboard.writeText(copyString).then(\n            () => {\n              /* clipboard successfully set */\n            },\n            () => {\n              /* clipboard write failed */\n              // Swallow the error\n            },\n          );\n        }\n      }\n\n      // Handle delete of items via Backspace/Del/Ctrl+X\n      if (needToDelete) {\n        if (\n          focusedItemIndices.length === 0 &&\n          input &&\n          input.current &&\n          !input.current.isValueSelected &&\n          input.current.inputElement === document.activeElement &&\n          (input.current as Autofill).cursorLocation === 0\n        ) {\n          showPicker(false);\n          ev.preventDefault();\n          selectedItemsListOnItemsRemoved?.([selectedItems[selectedItems.length - 1]]);\n          removeItemAt(selectedItems.length - 1);\n        } else if (focusedItemIndices.length > 0) {\n          showPicker(false);\n          ev.preventDefault();\n          selectedItemsListOnItemsRemoved?.(getSelectedItems());\n          removeSelectedItems();\n          input.current?.focus();\n        }\n      }\n    },\n    [\n      focusedItemIndices.length,\n      getSelectedItems,\n      onKeyDown,\n      removeItemAt,\n      removeSelectedItems,\n      selectedItems,\n      selectedItemsListGetItemCopyText,\n      selectedItemsListOnItemsRemoved,\n      selection,\n      showPicker,\n    ],\n  );\n\n  const _onValidateInput = React.useCallback(() => {\n    if (onValidateInput && createGenericItem) {\n      const itemToConvert = createGenericItem(queryString, onValidateInput(queryString));\n      if (itemToConvert !== null && itemToConvert !== undefined) {\n        _onSuggestionSelected(undefined, { item: itemToConvert, isSelected: false });\n      }\n    }\n  }, [onValidateInput, createGenericItem, queryString, _onSuggestionSelected]);\n\n  const _onInputKeyDown = React.useCallback(\n    (ev: React.KeyboardEvent<Autofill | HTMLElement>) => {\n      if (isSuggestionsShown) {\n        const keyCode = ev.which;\n        switch (keyCode) {\n          case KeyCodes.escape:\n            showPicker(false);\n            ev.preventDefault();\n            ev.stopPropagation();\n            break;\n          case KeyCodes.enter:\n          case KeyCodes.tab:\n            if (!ev.shiftKey && !ev.ctrlKey && (focusItemIndex >= 0 || footerItemIndex >= 0 || headerItemIndex >= 0)) {\n              ev.preventDefault();\n              ev.stopPropagation();\n              if (focusItemIndex >= 0) {\n                // Get the focused element and add it to selectedItemsList\n                showPicker(false);\n                _onSuggestionSelected(ev, suggestionItems[focusItemIndex]);\n              } else if (footerItemIndex >= 0) {\n                // execute the footer action\n                footerItems![footerItemIndex].onExecute!();\n              } else if (headerItemIndex >= 0) {\n                // execute the header action\n                headerItems![headerItemIndex].onExecute!();\n              }\n            } else {\n              _onValidateInput();\n            }\n            break;\n          case KeyCodes.up:\n            ev.preventDefault();\n            ev.stopPropagation();\n            selectPreviousSuggestion();\n            break;\n          case KeyCodes.down:\n            ev.preventDefault();\n            ev.stopPropagation();\n            selectNextSuggestion();\n            break;\n        }\n      }\n    },\n    [\n      _onSuggestionSelected,\n      focusItemIndex,\n      footerItemIndex,\n      footerItems,\n      headerItemIndex,\n      headerItems,\n      isSuggestionsShown,\n      selectNextSuggestion,\n      selectPreviousSuggestion,\n      showPicker,\n      suggestionItems,\n      _onValidateInput,\n    ],\n  );\n\n  React.useEffect(() => {\n    const inputElement = input.current?.inputElement;\n    inputElement?.addEventListener('keydown', _onInputKeyDown as () => void);\n\n    return () => {\n      inputElement?.removeEventListener('keydown', _onInputKeyDown as () => void);\n    };\n  });\n\n  const _onCopy = React.useCallback(\n    (ev: React.ClipboardEvent<HTMLInputElement>) => {\n      if (focusedItemIndices.length > 0 && selectedItemsListGetItemCopyText) {\n        const copyItems = selection.getSelection() as T[];\n        const copyString = selectedItemsListGetItemCopyText(copyItems);\n        ev.clipboardData.setData('text/plain', copyString);\n        ev.preventDefault();\n      }\n    },\n    [focusedItemIndices.length, selectedItemsListGetItemCopyText, selection],\n  );\n\n  const _onInputFocus = React.useCallback(\n    (ev: React.FocusEvent<HTMLInputElement | Autofill>): void => {\n      unselectAll();\n      inputPropsOnFocus?.(ev as React.FocusEvent<HTMLInputElement>);\n    },\n    [inputPropsOnFocus, unselectAll],\n  );\n\n  const _onInputClick = React.useCallback(\n    (ev: React.MouseEvent<HTMLInputElement | Autofill>) => {\n      unselectAll();\n      showPicker(true);\n      inputPropsOnClick?.(ev as React.MouseEvent<HTMLInputElement>);\n    },\n    [inputPropsOnClick, showPicker, unselectAll],\n  );\n\n  const _onInputChange = React.useCallback(\n    (value: string, composing?: boolean, resultItemsList?: T[]) => {\n      if (!composing) {\n        // update query string\n        setQueryString(value);\n        // suggestions isn't showing and we haven't just cleared the input, show the picker\n        !isSuggestionsShown && value !== '' ? showPicker(true) : null;\n        if (!resultItemsList) {\n          resultItemsList = [];\n        }\n        if (onInputChange) {\n          onInputChange(value, composing, resultItemsList);\n          if (resultItemsList && resultItemsList.length > 0) {\n            addItems(resultItemsList);\n            showPicker(false);\n            // Clear the input\n            if (input.current) {\n              input.current.clear();\n            }\n          }\n        }\n      }\n    },\n    [addItems, isSuggestionsShown, onInputChange, setQueryString, showPicker],\n  );\n\n  const _onPaste = React.useCallback(\n    (ev: React.ClipboardEvent<Autofill | HTMLInputElement>) => {\n      if (onPaste) {\n        const inputText = ev.clipboardData.getData('Text');\n        ev.preventDefault();\n        // Pass current selected items\n        onPaste(inputText, selectedItems);\n        setSelectedItems(selectedItems);\n        selection.setItems(selectedItems);\n      }\n    },\n    [onPaste, selectedItems, selection, setSelectedItems],\n  );\n\n  const _renderSelectedItemsList = (): JSX.Element => {\n    return onRenderSelectedItems({\n      ...selectedItemsListProps,\n      selectedItems: selectedItems,\n      focusedItemIndices: focusedItemIndices,\n      onItemsRemoved: _onRemoveSelectedItems,\n      replaceItem: _replaceItem,\n      dragDropHelper: dragDropHelper,\n      dragDropEvents: dragDropEvents ? dragDropEvents : defaultDragDropEvents,\n    });\n  };\n\n  const _onFloatingSuggestionsDismiss = React.useCallback(\n    (ev: React.MouseEvent): void => {\n      onFloatingSuggestionsDismiss?.(ev);\n      showPicker(false);\n    },\n    [onFloatingSuggestionsDismiss, showPicker],\n  );\n\n  const _onFloatingSuggestionRemoved = React.useCallback(\n    (ev: any, item: IFloatingSuggestionItemProps<T>) => {\n      onRemoveSuggestion?.(ev, item);\n      // We want to keep showing the picker to show the user that the entry has been removed from the list.\n      showPicker(true);\n    },\n    [onRemoveSuggestion, showPicker],\n  );\n\n  const _onRemoveSelectedItems = React.useCallback(\n    (itemsToRemove: T[]) => {\n      removeItems(itemsToRemove);\n      selectedItemsListOnItemsRemoved?.(itemsToRemove);\n    },\n    [removeItems, selectedItemsListOnItemsRemoved],\n  );\n\n  const _replaceItem = React.useCallback(\n    (newItem: T | T[], index: number) => {\n      const newItems = Array.isArray(newItem) ? newItem : [newItem];\n      dropItemsAt(index, newItems, [index]);\n      selectedItemsListReplaceItem?.(newItem, index);\n    },\n    [dropItemsAt, selectedItemsListReplaceItem],\n  );\n\n  const _renderFloatingPicker = () =>\n    onRenderFloatingSuggestions({\n      ...floatingSuggestionProps,\n      pickerWidth: pickerWidth || '300px',\n      targetElement: input.current?.inputElement,\n      isSuggestionsVisible: isSuggestionsShown,\n      suggestions: suggestionItems,\n      selectedSuggestionIndex: focusItemIndex,\n      selectedFooterIndex: footerItemIndex,\n      selectedHeaderIndex: headerItemIndex,\n      pickerSuggestionsProps: pickerSuggestionsProps,\n      onFloatingSuggestionsDismiss: _onFloatingSuggestionsDismiss,\n      onSuggestionSelected: _onSuggestionSelected,\n      onKeyDown: _onInputKeyDown,\n      onRemoveSuggestion: _onFloatingSuggestionRemoved,\n    });\n\n  const _canAddItems = () => true;\n\n  return (\n    <div\n      ref={rootRef}\n      className={css('ms-BasePicker ms-BaseExtendedPicker', className ? className : '')}\n      onKeyDown={_onKeyDown}\n      onCopy={_onCopy}\n    >\n      <FocusZone direction={FocusZoneDirection.bidirectional} {...focusZoneProps}>\n        <SelectionZone\n          selection={selection}\n          selectionMode={SelectionMode.multiple}\n          className={css('ms-UnifiedPicker-selectionZone', classNames.selectionZone)}\n        >\n          <div className={css('ms-BasePicker-text', classNames.pickerText)}>\n            {headerComponent}\n            {_renderSelectedItemsList()}\n            {_canAddItems() && (\n              <div\n                aria-owns={isSuggestionsShown ? 'suggestion-list' : undefined}\n                aria-expanded={isSuggestionsShown}\n                aria-haspopup=\"listbox\"\n                role=\"combobox\"\n                className={css('ms-BasePicker-div', classNames.pickerDiv)}\n                onDrop={_onDropAutoFill}\n                onDragOver={_onDragOverAutofill}\n              >\n                <Autofill\n                  {...(inputProps as IInputProps)}\n                  className={css('ms-BasePicker-input', classNames.pickerInput)}\n                  ref={input}\n                  onFocus={_onInputFocus}\n                  onClick={_onInputClick}\n                  onInputValueChange={_onInputChange}\n                  aria-autocomplete=\"list\"\n                  aria-activedescendant={\n                    isSuggestionsShown && focusItemIndex >= 0\n                      ? 'FloatingSuggestionsItemId-' + focusItemIndex\n                      : undefined\n                  }\n                  disabled={false}\n                  onPaste={_onPaste}\n                />\n              </div>\n            )}\n          </div>\n        </SelectionZone>\n      </FocusZone>\n      {_renderFloatingPicker()}\n    </div>\n  );\n};\n"]}
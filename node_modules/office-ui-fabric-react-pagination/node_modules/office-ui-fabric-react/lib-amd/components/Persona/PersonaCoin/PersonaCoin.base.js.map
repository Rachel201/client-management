{"version":3,"file":"PersonaCoin.base.js","sourceRoot":"../src/","sources":["components/Persona/PersonaCoin/PersonaCoin.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  BaseComponent,\n  classNamesFunction,\n  customizable,\n  divProperties,\n  getInitials,\n  getNativeProps,\n  getRTL,\n} from '../../../Utilities';\nimport { mergeStyles } from '../../../Styling';\nimport { PersonaPresence } from '../PersonaPresence/index';\nimport {\n  Icon\n} from '../../../Icon';\nimport {\n  Image,\n  ImageFit,\n  ImageLoadState\n} from '../../../Image';\nimport {\n  IPersonaCoinProps,\n  IPersonaCoinStyleProps,\n  IPersonaCoinStyles,\n  IPersonaPresenceProps,\n  PersonaPresence as PersonaPresenceEnum,\n  PersonaSize,\n} from '../Persona.types';\nimport { initialsColorPropToColorCode } from '../PersonaInitialsColor';\n\nconst getClassNames = classNamesFunction<IPersonaCoinStyleProps, IPersonaCoinStyles>();\n\nconst SIZE_TO_PIXELS: { [key: number]: number } = {\n  [PersonaSize.tiny]: 20,\n  [PersonaSize.extraExtraSmall]: 24,\n  [PersonaSize.extraSmall]: 28,\n  [PersonaSize.small]: 40,\n  [PersonaSize.regular]: 48,\n  [PersonaSize.large]: 72,\n  [PersonaSize.extraLarge]: 100,\n\n  [PersonaSize.size24]: 24,\n  [PersonaSize.size28]: 28,\n  [PersonaSize.size10]: 20,\n  [PersonaSize.size32]: 32,\n  [PersonaSize.size40]: 40,\n  [PersonaSize.size48]: 48,\n  [PersonaSize.size72]: 72,\n  [PersonaSize.size100]: 100\n};\n\nexport interface IPersonaState {\n  isImageLoaded?: boolean;\n  isImageError?: boolean;\n}\n\n/**\n * PersonaCoin with no default styles.\n * [Use the `getStyles` API to add your own styles.](https://github.com/OfficeDev/office-ui-fabric-react/wiki/Styling)\n */\n@customizable('PersonaCoin', ['theme'])\nexport class PersonaCoinBase extends BaseComponent<IPersonaCoinProps, IPersonaState> {\n  public static defaultProps: IPersonaCoinProps = {\n    size: PersonaSize.size48,\n    presence: PersonaPresenceEnum.none,\n    imageAlt: '',\n  };\n\n  constructor(props: IPersonaCoinProps) {\n    super(props);\n\n    this._warnDeprecations({ 'primaryText': 'text' });\n\n    this.state = {\n      isImageLoaded: false,\n      isImageError: false\n    };\n  }\n\n  public componentWillReceiveProps(nextProps: IPersonaCoinProps): void {\n    if (nextProps.imageUrl !== this.props.imageUrl) {\n      this.setState({\n        isImageLoaded: false,\n        isImageError: false\n      });\n    }\n  }\n\n  public render(): JSX.Element | null {\n    const {\n      className,\n      coinProps,\n      showUnknownPersonaCoin,\n      coinSize,\n      getStyles,\n      imageUrl,\n      onRenderCoin = this._onRenderCoin,\n      onRenderInitials = this._onRenderInitials,\n      presence,\n      theme,\n    } = this.props;\n\n    const size = this.props.size as PersonaSize;\n    const divProps = getNativeProps(this.props, divProperties);\n    const coinSizeStyle = coinSize ? { width: coinSize, height: coinSize } : undefined;\n\n    const personaPresenceProps: IPersonaPresenceProps = {\n      coinSize,\n      presence,\n      size,\n      theme,\n    };\n\n    // Use getStyles from props, or fall back to getStyles from styles file.\n    const classNames = getClassNames(getStyles, {\n      theme: theme!,\n      className: (coinProps && coinProps.className) ? coinProps.className : className,\n      size,\n      showUnknownPersonaCoin,\n    });\n\n    return (\n      <div\n        { ...divProps }\n        className={ classNames.coin }\n      >\n\n        { // Render PersonaCoin if size is not size10\n          (size !== PersonaSize.size10 && size !== PersonaSize.tiny)\n            ? (\n              <div\n                { ...coinProps }\n                className={ classNames.imageArea }\n                style={ coinSizeStyle }\n              >\n                {\n                  !this.state.isImageLoaded &&\n                  (!imageUrl || this.state.isImageError) &&\n                  (\n                    <div\n                      className={ mergeStyles(\n                        classNames.initials,\n                        !showUnknownPersonaCoin && { backgroundColor: initialsColorPropToColorCode(this.props) }\n                      ) }\n                      style={ coinSizeStyle }\n                      aria-hidden='true'\n                    >\n                      { onRenderInitials(this.props, this._onRenderInitials) }\n                    </div>\n                  )\n                }\n                { onRenderCoin(this.props, this._onRenderCoin) }\n                <PersonaPresence { ...personaPresenceProps } />\n              </div>\n            ) : ( // Otherwise, render just PersonaPresence.\n              this.props.presence\n                ? <PersonaPresence { ...personaPresenceProps } />\n                : // Just render Contact Icon if there isn't a Presence prop.\n                <Icon\n                  iconName='Contact'\n                  className={ classNames.size10WithoutPresenceIcon }\n                />\n            )\n        }\n        { this.props.children }\n      </div>\n    );\n  }\n\n  private _onRenderCoin = (props: IPersonaCoinProps): JSX.Element | null => {\n    const {\n      coinSize,\n      getStyles,\n      imageUrl,\n      imageAlt,\n      imageShouldFadeIn,\n      imageShouldStartVisible,\n      theme,\n      showUnknownPersonaCoin,\n    } = this.props;\n\n    // render Image component only if there is a valid imageUrl\n    if (!imageUrl) {\n      return null;\n    }\n\n    const size = this.props.size as PersonaSize;\n\n    const classNames = getClassNames(getStyles, {\n      theme: theme!,\n      size,\n      showUnknownPersonaCoin\n    });\n\n    return (\n      <Image\n        className={ classNames.image }\n        imageFit={ ImageFit.cover }\n        src={ imageUrl }\n        width={ coinSize || SIZE_TO_PIXELS[size] }\n        height={ coinSize || SIZE_TO_PIXELS[size] }\n        alt={ imageAlt }\n        shouldFadeIn={ imageShouldFadeIn }\n        shouldStartVisible={ imageShouldStartVisible }\n        onLoadingStateChange={ this._onPhotoLoadingStateChange }\n      />\n    );\n  }\n\n  /**\n   * Deprecation helper for getting text.\n   */\n  private _getText(): string {\n    return this.props.text || this.props.primaryText || '';\n  }\n\n  private _onRenderInitials = (props: IPersonaCoinProps): JSX.Element => {\n    let { imageInitials } = props;\n    const {\n      allowPhoneInitials,\n      showUnknownPersonaCoin\n    } = props;\n\n    if (showUnknownPersonaCoin) {\n      return <Icon iconName='Help' />;\n    }\n\n    const isRTL = getRTL();\n\n    imageInitials = imageInitials || getInitials(this._getText(), isRTL, allowPhoneInitials);\n\n    return (\n      imageInitials !== ''\n        ? <span>{ imageInitials }</span>\n        : <Icon iconName='Contact' />\n    );\n  }\n\n  private _onPhotoLoadingStateChange = (loadState: ImageLoadState) => {\n    this.setState({\n      isImageLoaded: loadState === ImageLoadState.loaded,\n      isImageError: loadState === ImageLoadState.error\n    });\n\n    this.props.onPhotoLoadingStateChange && this.props.onPhotoLoadingStateChange(loadState);\n  }\n}\n"]}
{"version":3,"file":"ContextualMenuButton.js","sourceRoot":"../src/","sources":["components/ContextualMenu/ContextualMenuItemWrapper/ContextualMenuButton.tsx"],"names":[],"mappings":";;;IAWA;QAA0C,gDAAyB;QAAnE;YAAA,qEAuGC;YAtGS,UAAI,GAAG,qBAAS,EAAqB,CAAC;YAmGpC,uBAAiB,GAAG;gBAC5B,OAAO,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC;YAC3D,CAAC,CAAA;;QACH,CAAC;QApGQ,qCAAM,GAAb;YAAA,iBA+FC;YA9FO,IAAA,eAeQ,EAdZ,cAAI,EACJ,0BAAU,EACV,gBAAK,EACL,gDAAqB,EACrB,kCAAc,EACd,gCAAa,EACb,sBAAQ,EACR,4BAA2D,EAA3D,+EAA2D,EAC3D,4CAAmB,EACnB,oCAAe,EACf,4BAAW,EACX,4BAAW,EACX,kCAAc,EACd,4BAAW,CACE;YAEf,IAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAC3C,IAAI,SAAS,GAAG,EAAE,CAAC;YAEnB,IAAI,IAAI,CAAC,SAAS,EAAE;gBAClB,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;aAC5B;iBAAM,IAAI,IAAI,CAAC,IAAI,EAAE;gBACpB,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC;aACvB;YAED,IAAM,SAAS,GAA+B,oBAAY,CAAC,IAAI,CAAC,CAAC;YACjE,IAAM,QAAQ,GAAY,SAAS,KAAK,IAAI,CAAC;YAC7C,IAAM,WAAW,GAAG,QAAQ,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,UAAU,CAAC;YAC/D,IAAM,cAAc,GAAG,kBAAU,CAAC,IAAI,CAAC,CAAC;YAExC,IAAM,sBAAsB,GAAG,0BAAc,CAAC,IAAI,EAAE,4BAAgB,CAAC,CAAC;YACtE,0EAA0E;YAC1E,OAAQ,sBAA8B,CAAC,QAAQ,CAAC;YAEhD,IAAM,oBAAoB,GAAG;gBAC3B,SAAS,EAAE,UAAU,CAAC,IAAI;gBAC1B,OAAO,EAAE,IAAI,CAAC,YAAY;gBAC1B,SAAS,EAAE,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI;gBACtD,YAAY,EAAE,IAAI,CAAC,iBAAiB;gBACpC,YAAY,EAAE,IAAI,CAAC,iBAAiB;gBACpC,WAAW,EAAE,UAAC,EAAO,IAAK,OAAA,eAAe,CAAC,CAAC,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,EAAvD,CAAuD;gBACjF,WAAW,EAAE,IAAI,CAAC,gBAAgB;gBAClC,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,YAAY,EAAE,SAAS;gBACvB,eAAe,EAAE,cAAc,IAAI,SAAS;gBAC5C,WAAW,EAAE,IAAI,CAAC,GAAG,KAAK,mBAAmB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS;gBACrE,eAAe,EAAE,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,KAAK,mBAAmB,CAAC,CAAC,CAAC,SAAS;gBAC9E,cAAc,EAAE,CAAC,CAAC,SAAS;gBAC3B,eAAe,EAAE,qBAAqB,GAAG,CAAC;gBAC1C,cAAc,EAAE,cAAc;gBAC9B,eAAe,EAAE,sBAAc,CAAC,IAAI,CAAC;gBACrC,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,WAAW;gBAC9B,KAAK,EAAE,IAAI,CAAC,KAAK;aAClB,CAAC;YAEI,IAAA,8BAAW,CAAU;YAC3B,IAAI,WAAW,IAAI,cAAc,EAAE;gBACjC,WAAW,wBACN,WAAW,IACd,OAAO,EAAE,IAAI,GACd,CAAC;aACH;YAED,OAAO,CACL,oBAAC,uBAAU,IACT,WAAW,EAAG,WAAW,EACzB,eAAe,EAAI,sBAA8B,CAAC,kBAAkB,CAAC,EACrE,QAAQ,EAAG,sBAAc,CAAC,IAAI,CAAC,IAE7B,UAAC,gBAAqB,IAAkB,OAAA,CACxC,iDACE,GAAG,EAAG,KAAI,CAAC,IAAI,IACV,sBAAuE,EACvE,oBAAqE,EACrE,gBAAgB;gBAErB,oBAAC,gBAAgB,IACf,YAAY,EAAG,IAAI,CAAC,YAAY,EAChC,IAAI,EAAG,IAAI,EACX,UAAU,EAAG,UAAU,EACvB,KAAK,EAAG,KAAK,EACb,gBAAgB,EAAG,aAAa,IAAI,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,EAC1F,QAAQ,EAAG,QAAQ,EACnB,WAAW,EAAG,WAAW,EACzB,cAAc,EAAG,cAAc,EAC/B,WAAW,EAAG,WAAW,EACzB,gBAAgB,EAAG,KAAI,CAAC,iBAAiB,GACzC,CACK,CACV,EApByC,CAoBzC,CACU,CACd,CAAC;QACJ,CAAC;QAKH,2BAAC;IAAD,CAAC,AAvGD,CAA0C,qDAAyB,GAuGlE;IAvGY,oDAAoB","sourcesContent":["import * as React from 'react';\nimport {\n  buttonProperties,\n  getNativeProps,\n  createRef\n} from '../../../Utilities';\nimport { ContextualMenuItemWrapper } from './ContextualMenuItemWrapper';\nimport { KeytipData } from '../../../KeytipData';\nimport { getIsChecked, isItemDisabled, hasSubmenu } from '../../../utilities/contextualMenu/index';\nimport { ContextualMenuItem } from '../ContextualMenuItem';\n\nexport class ContextualMenuButton extends ContextualMenuItemWrapper {\n  private _btn = createRef<HTMLButtonElement>();\n\n  public render() {\n    const {\n      item,\n      classNames,\n      index,\n      focusableElementIndex,\n      totalItemCount,\n      hasCheckmarks,\n      hasIcons,\n      contextualMenuItemAs: ChildrenRenderer = ContextualMenuItem,\n      expandedMenuItemKey,\n      onItemMouseDown,\n      onItemClick,\n      openSubMenu,\n      dismissSubMenu,\n      dismissMenu\n    } = this.props;\n\n    const subMenuId = this._getSubMenuId(item);\n    let ariaLabel = '';\n\n    if (item.ariaLabel) {\n      ariaLabel = item.ariaLabel;\n    } else if (item.name) {\n      ariaLabel = item.name;\n    }\n\n    const isChecked: boolean | null | undefined = getIsChecked(item);\n    const canCheck: boolean = isChecked !== null;\n    const defaultRole = canCheck ? 'menuitemcheckbox' : 'menuitem';\n    const itemHasSubmenu = hasSubmenu(item);\n\n    const buttonNativeProperties = getNativeProps(item, buttonProperties);\n    // Do not add the disabled attribute to the button so that it is focusable\n    delete (buttonNativeProperties as any).disabled;\n\n    const itemButtonProperties = {\n      className: classNames.root,\n      onClick: this._onItemClick,\n      onKeyDown: itemHasSubmenu ? this._onItemKeyDown : null,\n      onMouseEnter: this._onItemMouseEnter,\n      onMouseLeave: this._onItemMouseLeave,\n      onMouseDown: (ev: any) => onItemMouseDown ? onItemMouseDown(item, ev) : undefined,\n      onMouseMove: this._onItemMouseMove,\n      href: item.href,\n      title: item.title,\n      'aria-label': ariaLabel,\n      'aria-haspopup': itemHasSubmenu || undefined,\n      'aria-owns': item.key === expandedMenuItemKey ? subMenuId : undefined,\n      'aria-expanded': itemHasSubmenu ? item.key === expandedMenuItemKey : undefined,\n      'aria-checked': !!isChecked,\n      'aria-posinset': focusableElementIndex + 1,\n      'aria-setsize': totalItemCount,\n      'aria-disabled': isItemDisabled(item),\n      role: item.role || defaultRole,\n      style: item.style\n    };\n\n    let { keytipProps } = item;\n    if (keytipProps && itemHasSubmenu) {\n      keytipProps = {\n        ...keytipProps,\n        hasMenu: true\n      };\n    }\n\n    return (\n      <KeytipData\n        keytipProps={ keytipProps }\n        ariaDescribedBy={ (buttonNativeProperties as any)['aria-describedby'] }\n        disabled={ isItemDisabled(item) }\n      >\n        { (keytipAttributes: any): JSX.Element => (\n          <button\n            ref={ this._btn }\n            { ...buttonNativeProperties as React.ButtonHTMLAttributes<HTMLButtonElement> }\n            { ...itemButtonProperties as React.ButtonHTMLAttributes<HTMLButtonElement> }\n            { ...keytipAttributes }\n          >\n            <ChildrenRenderer\n              componentRef={ item.componentRef }\n              item={ item }\n              classNames={ classNames }\n              index={ index }\n              onCheckmarkClick={ hasCheckmarks && onItemClick ? onItemClick.bind(this, item) : undefined }\n              hasIcons={ hasIcons }\n              openSubMenu={ openSubMenu }\n              dismissSubMenu={ dismissSubMenu }\n              dismissMenu={ dismissMenu }\n              getSubmenuTarget={ this._getSubmenuTarget }\n            />\n          </button>\n        ) }\n      </KeytipData>\n    );\n  }\n\n  protected _getSubmenuTarget = (): HTMLElement | undefined => {\n    return this._btn.current ? this._btn.current : undefined;\n  }\n}"]}
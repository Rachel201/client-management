{"version":3,"file":"ContextualMenu.js","sourceRoot":"../src/","sources":["components/ContextualMenu/ContextualMenu.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { IContextualMenuProps, IContextualMenuItem, ContextualMenuItemType } from './ContextualMenu.types';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport { FocusZone, FocusZoneDirection, IFocusZoneProps, FocusZoneTabbableElements } from '../../FocusZone';\nimport {\n  IMenuItemClassNames,\n  IContextualMenuClassNames,\n  getContextualMenuClassNames,\n  getItemClassNames\n} from './ContextualMenu.classNames';\nimport {\n  BaseComponent,\n  IPoint,\n  assign,\n  getId,\n  getRTL,\n  KeyCodes,\n  getDocument,\n  getWindow,\n  customizable,\n  getFirstFocusable,\n  getLastFocusable,\n  css,\n  shouldWrapFocus\n} from '../../Utilities';\nimport { hasSubmenu, getIsChecked, isItemDisabled } from '../../utilities/contextualMenu/index';\nimport { withResponsiveMode, ResponsiveMode } from '../../utilities/decorators/withResponsiveMode';\nimport { Callout } from '../../Callout';\nimport { IIconProps } from '../../Icon';\nimport { ContextualMenuItem } from './ContextualMenuItem';\nimport { ContextualMenuSplitButton, ContextualMenuButton, ContextualMenuAnchor } from './ContextualMenuItemWrapper/index';\n\nexport interface IContextualMenuState {\n  expandedMenuItemKey?: string;\n  expandedByMouseClick?: boolean;\n  dismissedMenuItemKey?: string;\n  contextualMenuItems?: IContextualMenuItem[];\n  contextualMenuTarget?: Element;\n  submenuTarget?: Element;\n  positions?: any;\n  slideDirectionalClassName?: string;\n  subMenuId?: string;\n  submenuDirection?: DirectionalHint;\n}\n\nexport function getSubmenuItems(item: IContextualMenuItem) {\n  return item.subMenuProps ? item.subMenuProps.items : item.items;\n}\n\n/**\n * Returns true if a list of menu items can contain a checkbox\n */\nexport function canAnyMenuItemsCheck(items: IContextualMenuItem[]): boolean {\n  return items.some(item => {\n    if (item.canCheck) {\n      return true;\n    }\n\n    // If the item is a section, check if any of the items in the section can check.\n    if (item.sectionProps && item.sectionProps.items.some(submenuItem => submenuItem.canCheck === true)) {\n      return true;\n    }\n\n    return false;\n  });\n}\n\nconst NavigationIdleDelay = 250 /* ms */;\n\n@customizable('ContextualMenu', ['theme'])\n@withResponsiveMode\nexport class ContextualMenu extends BaseComponent<IContextualMenuProps, IContextualMenuState> {\n  // The default ContextualMenu properties have no items and beak, the default submenu direction is right and top.\n  public static defaultProps: IContextualMenuProps = {\n    items: [],\n    shouldFocusOnMount: true,\n    gapSpace: 0,\n    directionalHint: DirectionalHint.bottomAutoEdge,\n    beakWidth: 16,\n    getMenuClassNames: getContextualMenuClassNames\n  };\n\n  private _host: HTMLElement;\n  private _previousActiveElement: HTMLElement | null;\n  private _isFocusingPreviousElement: boolean;\n  private _enterTimerId: number | undefined;\n  private _targetWindow: Window;\n  private _target: Element | MouseEvent | IPoint | null;\n  private _classNames: IContextualMenuClassNames;\n  private _isScrollIdle: boolean;\n  private _scrollIdleTimeoutId: number | undefined;\n\n  private _adjustedFocusZoneProps: IFocusZoneProps;\n\n  constructor(props: IContextualMenuProps) {\n    super(props);\n\n    this.state = {\n      contextualMenuItems: undefined,\n      subMenuId: getId('ContextualMenu')\n    };\n\n    this._warnDeprecations({\n      'targetPoint': 'target',\n      'useTargetPoint': 'target',\n      'arrowDirection': 'focusZoneProps'\n    });\n\n    this._isFocusingPreviousElement = false;\n    this._isScrollIdle = true;\n  }\n\n  public dismiss = (ev?: any, dismissAll?: boolean) => {\n    const { onDismiss } = this.props;\n\n    if (onDismiss) {\n      onDismiss(ev, dismissAll);\n    }\n  }\n\n  public componentWillUpdate(newProps: IContextualMenuProps): void {\n    if (newProps.target !== this.props.target) {\n      const newTarget = newProps.target;\n      this._setTargetWindowAndElement(newTarget!);\n    }\n    if (newProps.hidden !== this.props.hidden) {\n      if (newProps.hidden) {\n        this._onMenuClosed();\n      } else {\n        this._onMenuOpened();\n        this._previousActiveElement = this._targetWindow ? this._targetWindow.document.activeElement as HTMLElement : null;\n      }\n    }\n  }\n\n  // Invoked once, both on the client and server, immediately before the initial rendering occurs.\n  public componentWillMount() {\n    const target = this.props.target;\n    this._setTargetWindowAndElement(target!);\n    if (!this.props.hidden) {\n      this._previousActiveElement = this._targetWindow ? this._targetWindow.document.activeElement as HTMLElement : null;\n    }\n  }\n\n  // Invoked once, only on the client (not on the server), immediately after the initial rendering occurs.\n  public componentDidMount(): void {\n    if (!this.props.hidden) {\n      this._onMenuOpened();\n    }\n  }\n\n  // Invoked immediately before a component is unmounted from the DOM.\n  public componentWillUnmount() {\n    if (this._isFocusingPreviousElement && this._previousActiveElement) {\n\n      // This slight delay is required so that we can unwind the stack, const react try to mess with focus, and then\n      // apply the correct focus. Without the setTimeout, we end up focusing the correct thing, and then React wants\n      // to reset the focus back to the thing it thinks should have been focused.\n      // Note: Cannot be replaced by this._async.setTimout because those will be removed by the time this is called.\n      setTimeout(() => { this._previousActiveElement && this._previousActiveElement!.focus(); }, 0);\n    }\n\n    if (this.props.onMenuDismissed) {\n      this.props.onMenuDismissed(this.props);\n    }\n  }\n\n  public render(): JSX.Element | null {\n    let {\n      isBeakVisible\n    } = this.props;\n\n    const {\n      className,\n      items,\n      labelElementId,\n      id,\n      targetPoint,\n      useTargetPoint,\n      beakWidth,\n      directionalHint,\n      directionalHintForRTL,\n      gapSpace,\n      coverTarget,\n      ariaLabel,\n      doNotLayer,\n      target,\n      bounds,\n      useTargetWidth,\n      useTargetAsMinWidth,\n      directionalHintFixed,\n      shouldFocusOnMount,\n      shouldFocusOnContainer,\n      title,\n      theme,\n      calloutProps,\n      onRenderSubMenu = this._onRenderSubMenu,\n      focusZoneProps\n    } = this.props;\n\n    const menuClassNames = this.props.getMenuClassNames || getContextualMenuClassNames;\n    this._classNames = menuClassNames(theme!, className);\n\n    const hasIcons = itemsHaveIcons(items);\n\n    function itemsHaveIcons(contextualMenuItems: IContextualMenuItem[]): boolean {\n      for (const item of contextualMenuItems) {\n        if (!!item.icon || !!item.iconProps) {\n          return true;\n        }\n\n        if (item.itemType === ContextualMenuItemType.Section && item.sectionProps && itemsHaveIcons(item.sectionProps.items)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    this._adjustedFocusZoneProps = { ...focusZoneProps, direction: this._getFocusZoneDirection() };\n\n    const hasCheckmarks = canAnyMenuItemsCheck(items);\n    const submenuProps = this.state.expandedMenuItemKey ? this._getSubmenuProps() : null;\n\n    isBeakVisible = isBeakVisible === undefined ? this.props.responsiveMode! <= ResponsiveMode.medium : isBeakVisible;\n    /**\n     * When useTargetWidth is true, get the width of the target element and apply it for the context menu container\n     */\n    let contextMenuStyle;\n    const targetAsHtmlElement = this._target as HTMLElement;\n    if ((useTargetWidth || useTargetAsMinWidth) && targetAsHtmlElement && targetAsHtmlElement.offsetWidth) {\n      const targetBoundingRect = targetAsHtmlElement.getBoundingClientRect();\n      const targetWidth = targetBoundingRect.width - 2 /* Accounts for 1px border */;\n\n      if (useTargetWidth) {\n        contextMenuStyle = {\n          width: targetWidth\n        };\n      } else if (useTargetAsMinWidth) {\n        contextMenuStyle = {\n          minWidth: targetWidth\n        };\n      }\n    }\n\n    // The menu should only return if items were provided, if no items were provided then it should not appear.\n    if (items && items.length > 0) {\n      let indexCorrection = 0;\n      let totalItemCount = 0;\n      for (const item of items) {\n        if (item.itemType !== ContextualMenuItemType.Divider &&\n          item.itemType !== ContextualMenuItemType.Header) {\n          const itemCount = item.customOnRenderListLength ? item.customOnRenderListLength : 1;\n          totalItemCount += itemCount;\n        }\n      }\n      return (\n        <Callout\n          { ...calloutProps }\n          target={ useTargetPoint ? targetPoint : target }\n          isBeakVisible={ isBeakVisible }\n          beakWidth={ beakWidth }\n          directionalHint={ directionalHint }\n          directionalHintForRTL={ directionalHintForRTL }\n          gapSpace={ gapSpace }\n          coverTarget={ coverTarget }\n          doNotLayer={ doNotLayer }\n          className={ css('ms-ContextualMenu-Callout', calloutProps ? calloutProps.className : undefined) }\n          setInitialFocus={ shouldFocusOnMount }\n          onDismiss={ this.props.onDismiss }\n          onScroll={ this._onScroll }\n          bounds={ bounds }\n          directionalHintFixed={ directionalHintFixed }\n          hidden={ this.props.hidden }\n        >\n          <div\n            role={ 'menu' }\n            aria-label={ ariaLabel }\n            aria-labelledby={ labelElementId }\n            style={ contextMenuStyle }\n            ref={ (host: HTMLDivElement) => this._host = host }\n            id={ id }\n            className={ this._classNames.container }\n            tabIndex={ shouldFocusOnContainer ? 0 : -1 }\n            onKeyDown={ this._onMenuKeyDown }\n          >\n            { title && <div className={ this._classNames.title } role='heading' aria-level={ 1 }> { title } </div> }\n            { (items && items.length) ? (\n              <FocusZone\n                { ...this._adjustedFocusZoneProps }\n                className={ this._classNames.root }\n                isCircularNavigation={ true }\n                handleTabKey={ FocusZoneTabbableElements.all }\n              >\n                <ul\n                  className={ this._classNames.list }\n                  onKeyDown={ this._onKeyDown }\n                >\n                  { items.map((item, index) => {\n                    const menuItem = this._renderMenuItem(item, index, indexCorrection, totalItemCount, hasCheckmarks, hasIcons);\n                    if (item.itemType !== ContextualMenuItemType.Divider &&\n                      item.itemType !== ContextualMenuItemType.Header) {\n                      const indexIncrease = item.customOnRenderListLength ? item.customOnRenderListLength : 1;\n                      indexCorrection += indexIncrease;\n                    }\n                    return menuItem;\n                  }) }\n                </ul>\n              </FocusZone>\n            ) : (null) }\n            { submenuProps && onRenderSubMenu(submenuProps, this._onRenderSubMenu) }\n          </div>\n        </Callout>\n      );\n    } else {\n      return null;\n    }\n  }\n\n  private _onMenuOpened() {\n    this._events.on(this._targetWindow, 'resize', this.dismiss);\n    this.props.onMenuOpened && this.props.onMenuOpened(this.props);\n  }\n\n  private _onMenuClosed() {\n    this._events.off(this._targetWindow, 'resize', this.dismiss);\n    this._previousActiveElement && this._async.setTimeout(() => { this._previousActiveElement && this._previousActiveElement!.focus(); }, 0);\n  }\n\n  /**\n   * Gets the focusZoneDirection by using the arrowDirection if specified,\n   * the direction specificed in the focusZoneProps, or defaults to FocusZoneDirection.vertical\n   */\n  private _getFocusZoneDirection() {\n    const {\n      arrowDirection,\n      focusZoneProps\n    } = this.props;\n    return arrowDirection !== undefined ? arrowDirection :\n      focusZoneProps && focusZoneProps.direction !== undefined ? focusZoneProps.direction : FocusZoneDirection.vertical;\n  }\n\n  private _onRenderSubMenu(subMenuProps: IContextualMenuProps) {\n    return <ContextualMenu { ...subMenuProps } />;\n  }\n\n  private _renderMenuItem(item: IContextualMenuItem, index: number, focusableElementIndex: number, totalItemCount: number, hasCheckmarks: boolean, hasIcons: boolean): React.ReactNode {\n    const renderedItems: React.ReactNode[] = [];\n    const iconProps = this._getIconProps(item);\n    // We only send a dividerClassName when the item to be rendered is a divider. For all other cases, the default divider style is used.\n    const dividerClassName = item.itemType === ContextualMenuItemType.Divider ? item.className : undefined;\n    const subMenuIconClassName = item.submenuIconProps ? item.submenuIconProps.className : '';\n    const getClassNames = item.getItemClassNames || getItemClassNames;\n    const itemClassNames = getClassNames(\n      this.props.theme!,\n      isItemDisabled(item),\n      (this.state.expandedMenuItemKey === item.key),\n      !!getIsChecked(item),\n      !!item.href,\n      (iconProps.iconName !== 'None'),\n      item.className,\n      dividerClassName,\n      iconProps.className,\n      subMenuIconClassName,\n      item.primaryDisabled\n    );\n\n    if (item.name === '-') {\n      item.itemType = ContextualMenuItemType.Divider;\n    }\n    switch (item.itemType) {\n      case ContextualMenuItemType.Divider:\n        renderedItems.push(this._renderSeparator(index, itemClassNames));\n        break;\n      case ContextualMenuItemType.Header:\n        renderedItems.push(this._renderSeparator(index, itemClassNames));\n        const headerItem = this._renderHeaderMenuItem(item, itemClassNames, index, hasCheckmarks, hasIcons);\n        renderedItems.push(this._renderListItem(headerItem, item.key || index, itemClassNames, item.title));\n        break;\n      case ContextualMenuItemType.Section:\n        renderedItems.push(this._renderSectionItem(item, itemClassNames, index, hasCheckmarks, hasIcons));\n        break;\n      default:\n        const menuItem = this._renderNormalItem(item, itemClassNames, index, focusableElementIndex, totalItemCount, hasCheckmarks, hasIcons);\n        renderedItems.push(this._renderListItem(menuItem, item.key || index, itemClassNames, item.title));\n        break;\n    }\n\n    return renderedItems;\n  }\n\n  private _renderSectionItem(item: IContextualMenuItem, menuClassNames: IMenuItemClassNames, index: number, hasCheckmarks: boolean, hasIcons: boolean) {\n    const section = item.sectionProps;\n    if (!section) {\n      return;\n    }\n\n    let headerItem;\n    if (section.title) {\n      const headerContextualMenuItem: IContextualMenuItem = {\n        key: `section-${section.title}-title`,\n        itemType: ContextualMenuItemType.Header,\n        name: section.title,\n      };\n      headerItem = this._renderHeaderMenuItem(headerContextualMenuItem, menuClassNames, index, hasCheckmarks, hasIcons);\n    }\n\n    if (section.items && section.items.length > 0) {\n      return (\n        <li\n          role='presentation'\n          key={ section.key }\n        >\n          <div role='group'>\n            <ul className={ this._classNames.list }>\n              { section.topDivider && this._renderSeparator(index, menuClassNames, true, true) }\n              { headerItem && this._renderListItem(headerItem, item.key || index, menuClassNames, item.title) }\n              { section.items.map((contextualMenuItem, itemsIndex) => (\n                this._renderMenuItem(contextualMenuItem, itemsIndex, itemsIndex, section.items.length, hasCheckmarks, hasIcons)\n              )) }\n              { section.bottomDivider && this._renderSeparator(index, menuClassNames, false, true) }\n            </ul>\n          </div>\n        </li>\n      );\n    }\n  }\n\n  private _renderListItem(content: React.ReactNode, key: string | number, classNames: IMenuItemClassNames, title?: string) {\n    return (\n      <li\n        role='presentation'\n        title={ title }\n        key={ key }\n        className={ classNames.item }\n      >\n        { content }\n      </li>\n    );\n  }\n\n  private _renderSeparator(index: number, classNames: IMenuItemClassNames, top?: boolean, fromSection?: boolean): React.ReactNode {\n    if (fromSection || index > 0) {\n      return (\n        <li\n          role='separator'\n          key={ 'separator-' + index + (top === undefined ? '' : (top ? '-top' : '-bottom')) }\n          className={ classNames.divider }\n        />\n      );\n    }\n    return null;\n  }\n\n  private _renderNormalItem(item: IContextualMenuItem, classNames: IMenuItemClassNames, index: number, focusableElementIndex: number, totalItemCount: number, hasCheckmarks: boolean, hasIcons: boolean): React.ReactNode {\n    if (item.onRender) {\n      return [item.onRender({ 'aria-posinset': focusableElementIndex + 1, 'aria-setsize': totalItemCount, ...item }, this.dismiss)];\n    }\n    if (item.href) {\n      return this._renderAnchorMenuItem(item, classNames, index, focusableElementIndex, totalItemCount, hasCheckmarks, hasIcons);\n    }\n\n    if (item.split && hasSubmenu(item)) {\n      return this._renderSplitButton(item, classNames, index, focusableElementIndex, totalItemCount, hasCheckmarks, hasIcons);\n    }\n\n    return this._renderButtonItem(item, classNames, index, focusableElementIndex, totalItemCount, hasCheckmarks, hasIcons);\n  }\n\n  private _renderHeaderMenuItem(item: IContextualMenuItem, classNames: IMenuItemClassNames, index: number, hasCheckmarks: boolean, hasIcons: boolean): React.ReactNode {\n    const { contextualMenuItemAs: ChildrenRenderer = ContextualMenuItem } = this.props;\n\n    return (\n      <div className={ this._classNames.header } style={ item.style } role='heading' aria-level={ this.props.title ? 2 : 1 }>\n        <ChildrenRenderer\n          item={ item }\n          classNames={ classNames }\n          index={ index }\n          onCheckmarkClick={ hasCheckmarks ? this._onItemClick : undefined }\n          hasIcons={ hasIcons }\n        />\n      </div>);\n  }\n\n  private _renderAnchorMenuItem(item: IContextualMenuItem, classNames: IMenuItemClassNames, index: number, focusableElementIndex: number, totalItemCount: number, hasCheckmarks: boolean, hasIcons: boolean): React.ReactNode {\n    const { contextualMenuItemAs } = this.props;\n    const { expandedMenuItemKey } = this.state;\n    return (\n      <ContextualMenuAnchor\n        item={ item }\n        classNames={ classNames }\n        index={ index }\n        focusableElementIndex={ focusableElementIndex }\n        totalItemCount={ totalItemCount }\n        hasCheckmarks={ hasCheckmarks }\n        hasIcons={ hasIcons }\n        contextualMenuItemAs={ contextualMenuItemAs }\n        onItemMouseEnter={ this._onItemMouseEnterBase }\n        onItemMouseLeave={ this._onMouseItemLeave }\n        onItemMouseMove={ this._onItemMouseMoveBase }\n        onItemMouseDown={ this._onItemMouseDown }\n        executeItemClick={ this._executeItemClick }\n        onItemClick={ this._onAnchorClick }\n        onItemKeyDown={ this._onItemKeyDown }\n        getSubMenuId={ this._getSubMenuId }\n        expandedMenuItemKey={ expandedMenuItemKey }\n        openSubMenu={ this._onItemSubMenuExpand }\n        dismissSubMenu={ this._onSubMenuDismiss }\n        dismissMenu={ this.dismiss }\n      />\n    );\n  }\n\n  private _renderButtonItem(\n    item: IContextualMenuItem,\n    classNames: IMenuItemClassNames,\n    index: number,\n    focusableElementIndex: number,\n    totalItemCount: number,\n    hasCheckmarks?: boolean,\n    hasIcons?: boolean) {\n    const { contextualMenuItemAs } = this.props;\n    const { expandedMenuItemKey } = this.state;\n\n    return (\n      <ContextualMenuButton\n        item={ item }\n        classNames={ classNames }\n        index={ index }\n        focusableElementIndex={ focusableElementIndex }\n        totalItemCount={ totalItemCount }\n        hasCheckmarks={ hasCheckmarks }\n        hasIcons={ hasIcons }\n        contextualMenuItemAs={ contextualMenuItemAs }\n        onItemMouseEnter={ this._onItemMouseEnterBase }\n        onItemMouseLeave={ this._onMouseItemLeave }\n        onItemMouseMove={ this._onItemMouseMoveBase }\n        onItemMouseDown={ this._onItemMouseDown }\n        executeItemClick={ this._executeItemClick }\n        onItemClick={ this._onItemClick }\n        onItemClickBase={ this._onItemClickBase }\n        onItemKeyDown={ this._onItemKeyDown }\n        getSubMenuId={ this._getSubMenuId }\n        expandedMenuItemKey={ expandedMenuItemKey }\n        openSubMenu={ this._onItemSubMenuExpand }\n        dismissSubMenu={ this._onSubMenuDismiss }\n        dismissMenu={ this.dismiss }\n      />\n    );\n  }\n\n  private _renderSplitButton(\n    item: IContextualMenuItem,\n    classNames: IMenuItemClassNames,\n    index: number,\n    focusableElementIndex: number,\n    totalItemCount: number,\n    hasCheckmarks?: boolean,\n    hasIcons?: boolean): JSX.Element {\n    const { contextualMenuItemAs } = this.props;\n    const { expandedMenuItemKey } = this.state;\n\n    return (\n      <ContextualMenuSplitButton\n        item={ item }\n        classNames={ classNames }\n        index={ index }\n        focusableElementIndex={ focusableElementIndex }\n        totalItemCount={ totalItemCount }\n        hasCheckmarks={ hasCheckmarks }\n        hasIcons={ hasIcons }\n        contextualMenuItemAs={ contextualMenuItemAs }\n        onItemMouseEnter={ this._onItemMouseEnterBase }\n        onItemMouseLeave={ this._onMouseItemLeave }\n        onItemMouseMove={ this._onItemMouseMoveBase }\n        onItemMouseDown={ this._onItemMouseDown }\n        executeItemClick={ this._executeItemClick }\n        onItemClick={ this._onItemClick }\n        onItemClickBase={ this._onItemClickBase }\n        onItemKeyDown={ this._onItemKeyDown }\n        openSubMenu={ this._onItemSubMenuExpand }\n        dismissSubMenu={ this._onSubMenuDismiss }\n        dismissMenu={ this.dismiss }\n        expandedMenuItemKey={ expandedMenuItemKey }\n        onTap={ this._onPointerAndTouchEvent }\n      />\n    );\n  }\n\n  private _getIconProps(item: IContextualMenuItem): IIconProps {\n    const iconProps: IIconProps = item.iconProps ? item.iconProps : {\n      iconName: item.icon\n    };\n    return iconProps;\n  }\n\n  private _onKeyDown = (ev: React.KeyboardEvent<HTMLElement>) => {\n    if (ev.which === KeyCodes.escape ||\n      ev.altKey ||\n      ev.metaKey ||\n      this._shouldCloseSubMenu(ev)) {\n      // When a user presses escape, we will try to refocus the previous focused element.\n      this._isFocusingPreviousElement = true;\n      ev.preventDefault();\n      ev.stopPropagation();\n      this.dismiss(ev);\n    }\n  }\n\n  /**\n   * Checks if the submenu should be closed\n   */\n  private _shouldCloseSubMenu = (ev: React.KeyboardEvent<HTMLElement>): boolean => {\n    const submenuCloseKey = getRTL() ? KeyCodes.right : KeyCodes.left;\n\n    if (ev.which !== submenuCloseKey || !this.props.isSubMenu) {\n      return false;\n    }\n\n    return this._adjustedFocusZoneProps.direction === FocusZoneDirection.vertical ||\n      (!!this._adjustedFocusZoneProps.checkForNoWrap && !shouldWrapFocus(ev.target as HTMLElement, 'data-no-horizontal-wrap'));\n  }\n\n  private _onMenuKeyDown = (ev: React.KeyboardEvent<HTMLElement>) => {\n    if (ev.which === KeyCodes.escape || ev.altKey || ev.metaKey) {\n      this._isFocusingPreviousElement = true;\n      ev.preventDefault();\n      ev.stopPropagation();\n      this.dismiss(ev);\n      return;\n    }\n\n    if (!this._host) {\n      return;\n    }\n\n    const elementToFocus = ev.which === KeyCodes.up ?\n      getLastFocusable(this._host, (this._host.lastChild as HTMLElement), true) :\n      ev.which === KeyCodes.down ?\n        getFirstFocusable(this._host, (this._host.firstChild as HTMLElement), true) :\n        null;\n\n    if (elementToFocus) {\n      elementToFocus.focus();\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n  }\n\n  /**\n   * Scroll handler for the callout to make sure the mouse events\n   * for updating focus are not interacting during scroll\n   */\n  private _onScroll = (): void => {\n    if (!this._isScrollIdle && this._scrollIdleTimeoutId !== undefined) {\n      this._async.clearTimeout(this._scrollIdleTimeoutId);\n      this._scrollIdleTimeoutId = undefined;\n    } else {\n      this._isScrollIdle = false;\n    }\n\n    this._scrollIdleTimeoutId = this._async.setTimeout(() => { this._isScrollIdle = true; }, NavigationIdleDelay);\n  }\n\n  private _onItemMouseEnterBase = (item: any, ev: React.MouseEvent<HTMLElement>, target?: HTMLElement): void => {\n    if (!this._isScrollIdle) {\n      return;\n    }\n\n    this._updateFocusOnMouseEvent(item, ev, target);\n  }\n\n  private _onItemMouseMoveBase = (item: any, ev: React.MouseEvent<HTMLElement>, target: HTMLElement): void => {\n\n    const targetElement = ev.currentTarget as HTMLElement;\n\n    if (!this._isScrollIdle ||\n      this._enterTimerId !== undefined ||\n      targetElement === this._targetWindow.document.activeElement as HTMLElement) {\n      return;\n    }\n\n    this._updateFocusOnMouseEvent(item, ev, target);\n  }\n  private _onMouseItemLeave = (item: any, ev: React.MouseEvent<HTMLElement>): void => {\n    if (!this._isScrollIdle) {\n      return;\n    }\n\n    if (this._enterTimerId !== undefined) {\n      this._async.clearTimeout(this._enterTimerId);\n      this._enterTimerId = undefined;\n    }\n\n    if (this.state.expandedMenuItemKey !== undefined) {\n      return;\n    }\n\n    /**\n     * IE11 focus() method forces parents to scroll to top of element.\n     * Edge and IE expose a setActive() function for focusable divs that\n     * sets the page focus but does not scroll the parent element.\n     */\n    if ((this._host as any).setActive) {\n      (this._host as any).setActive();\n    } else {\n      this._host.focus();\n    }\n  }\n\n  /**\n   * Handles updating focus when mouseEnter or mouseMove fire.\n   * As part of updating focus, This function will also update\n   * the expand/collapse state accordingly.\n   */\n  private _updateFocusOnMouseEvent(item: IContextualMenuItem, ev: React.MouseEvent<HTMLElement>, target?: HTMLElement) {\n    const targetElement = target ? target : ev.currentTarget as HTMLElement;\n    const { subMenuHoverDelay: timeoutDuration = NavigationIdleDelay } = this.props;\n\n    if (item.key === this.state.expandedMenuItemKey) {\n      return;\n    }\n\n    if (this._enterTimerId !== undefined) {\n      this._async.clearTimeout(this._enterTimerId);\n      this._enterTimerId = undefined;\n    }\n\n    // If the menu is not expanded we can update focus without any delay\n    if (this.state.expandedMenuItemKey === undefined) {\n      targetElement.focus();\n    }\n\n    // Delay updating expanding/dismissing the submenu\n    // and only set focus if we have not already done so\n    if (hasSubmenu(item)) {\n      ev.stopPropagation();\n      this._enterTimerId = this._async.setTimeout(() => {\n        targetElement.focus();\n        this.setState({\n          expandedByMouseClick: true\n        });\n        this._onItemSubMenuExpand(item, targetElement);\n        this._enterTimerId = undefined;\n      }, timeoutDuration);\n    } else {\n      this._enterTimerId = this._async.setTimeout(() => {\n        this._onSubMenuDismiss(ev);\n        targetElement.focus();\n        this._enterTimerId = undefined;\n      }, timeoutDuration);\n    }\n  }\n\n  private _onItemMouseDown = (item: IContextualMenuItem, ev: React.MouseEvent<HTMLElement>): void => {\n    if (item.onMouseDown) {\n      item.onMouseDown(item, ev);\n    }\n  }\n\n  private _onItemClick = (item: IContextualMenuItem, ev: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>): void => {\n    this._onItemClickBase(item, ev, ev.currentTarget as HTMLElement);\n  }\n\n  private _onItemClickBase = (item: IContextualMenuItem, ev: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>, target: HTMLElement): void => {\n    const items = getSubmenuItems(item);\n\n    // Cancel a async menu item hover timeout action from being taken and instead\n    // just trigger the click event instead.\n    this._cancelSubMenuTimer();\n\n    if (!hasSubmenu(item) && (!items || !items.length)) { // This is an item without a menu. Click it.\n      this._executeItemClick(item, ev);\n    } else {\n      if (item.key === this.state.expandedMenuItemKey) { // This has an expanded sub menu. collapse it.\n        this._onSubMenuDismiss(ev);\n      } else { // This has a collapsed sub menu. Expand it.\n        this.setState({\n          // When Edge + Narrator are used together (regardless of if the button is in a form or not), pressing\n          // \"Enter\" fires this method and not _onMenuKeyDown. Checking ev.nativeEvent.detail differentiates\n          // between a real click event and a keypress event.\n          expandedByMouseClick: (ev.nativeEvent.detail !== 0)\n        });\n        this._onItemSubMenuExpand(item, target);\n      }\n    }\n\n    ev.stopPropagation();\n    ev.preventDefault();\n  }\n\n  private _onAnchorClick = (item: IContextualMenuItem, ev: React.MouseEvent<HTMLElement>) => {\n    this._executeItemClick(item, ev);\n    ev.stopPropagation();\n  }\n\n  private _executeItemClick = (item: IContextualMenuItem, ev: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>): void => {\n    if (item.disabled || item.isDisabled) {\n      return;\n    }\n\n    let dismiss = false;\n    if (item.onClick) {\n      dismiss = !!item.onClick(ev, item);\n    } else if (this.props.onItemClick) {\n      dismiss = !!this.props.onItemClick(ev, item);\n    }\n\n    (dismiss || !ev.defaultPrevented) && this.dismiss(ev, true);\n  }\n\n  private _onItemKeyDown = (item: any, ev: React.KeyboardEvent<HTMLElement>): void => {\n    const openKey = getRTL() ? KeyCodes.left : KeyCodes.right;\n\n    if ((ev.which === openKey || ev.which === KeyCodes.enter) && !item.disabled) {\n      this.setState({\n        expandedByMouseClick: false\n      });\n      this._onItemSubMenuExpand(item, ev.currentTarget as HTMLElement);\n      ev.preventDefault();\n    }\n  }\n\n  // Cancel a async menu item hover timeout action from being taken and instead\n  // do new upcoming behavior\n  private _cancelSubMenuTimer = () => {\n    if (this._enterTimerId !== undefined) {\n      this._async.clearTimeout(this._enterTimerId);\n      this._enterTimerId = undefined;\n    }\n  }\n\n  private _onItemSubMenuExpand = (item: IContextualMenuItem, target: HTMLElement): void => {\n    if (this.state.expandedMenuItemKey !== item.key) {\n\n      if (this.state.expandedMenuItemKey) {\n        this._onSubMenuDismiss();\n      }\n\n      // Focus the target to ensure when we close it, we're focusing on the correct element.\n      target.focus();\n      this.setState({\n        expandedMenuItemKey: item.key,\n        submenuTarget: target\n      });\n    }\n  }\n\n  private _getSubmenuProps() {\n    const { submenuTarget, expandedMenuItemKey } = this.state;\n    const item = this._findItemByKey(expandedMenuItemKey!);\n    let submenuProps = null;\n\n    if (item) {\n      submenuProps = {\n        items: getSubmenuItems(item)!,\n        target: submenuTarget,\n        onDismiss: this._onSubMenuDismiss,\n        isSubMenu: true,\n        id: this.state.subMenuId,\n        shouldFocusOnMount: true,\n        shouldFocusOnContainer: this.state.expandedByMouseClick,\n        directionalHint: getRTL() ? DirectionalHint.leftTopEdge : DirectionalHint.rightTopEdge,\n        className: this.props.className,\n        gapSpace: 0,\n        isBeakVisible: false\n      };\n\n      if (item.subMenuProps) {\n        assign(submenuProps, item.subMenuProps);\n      }\n    }\n    return submenuProps;\n  }\n\n  private _findItemByKey(key: string): IContextualMenuItem | undefined {\n    const { items } = this.props;\n    return this._findItemByKeyFromItems(key, items);\n  }\n\n  /**\n   * Returns the item that mathes a given key if any.\n   * @param key The key of the item to match\n   * @param items The items to look for the key\n   */\n  private _findItemByKeyFromItems(key: string, items: IContextualMenuItem[]): IContextualMenuItem | undefined {\n    for (const item of items) {\n      if (item.itemType === ContextualMenuItemType.Section && item.sectionProps) {\n        const match = this._findItemByKeyFromItems(key, item.sectionProps.items);\n        if (match) {\n          return match;\n        }\n      } else if (item.key && item.key === key) {\n        return item;\n      }\n    }\n  }\n\n  private _onSubMenuDismiss = (ev?: any, dismissAll?: boolean): void => {\n    if (dismissAll) {\n      this.dismiss(ev, dismissAll);\n    } else {\n      this.setState({\n        dismissedMenuItemKey: this.state.expandedMenuItemKey,\n        expandedMenuItemKey: undefined,\n        submenuTarget: undefined\n      });\n    }\n  }\n\n  private _setTargetWindowAndElement(target: Element | string | MouseEvent | IPoint): void {\n    if (target) {\n      if (typeof target === 'string') {\n        const currentDoc: Document = getDocument()!;\n        this._target = currentDoc ? currentDoc.querySelector(target) as Element : null;\n        this._targetWindow = getWindow()!;\n      } else if ((target as MouseEvent).stopPropagation) {\n        this._targetWindow = getWindow((target as MouseEvent).toElement as HTMLElement)!;\n        this._target = target;\n      } else if ((target as IPoint).x !== undefined && (target as IPoint).y !== undefined) {\n        this._targetWindow = getWindow()!;\n        this._target = target;\n      } else {\n        const targetElement: Element = target as Element;\n        this._targetWindow = getWindow(targetElement)!;\n        this._target = target;\n      }\n    } else {\n      this._targetWindow = getWindow()!;\n    }\n  }\n\n  private _getSubMenuId = (item: IContextualMenuItem): string | undefined => {\n    let { subMenuId } = this.state;\n\n    if (item.subMenuProps && item.subMenuProps.id) {\n      subMenuId = item.subMenuProps.id;\n    }\n\n    return subMenuId;\n  }\n\n  private _onPointerAndTouchEvent = (ev: React.TouchEvent<HTMLElement> | PointerEvent) => {\n    this._cancelSubMenuTimer();\n  }\n}\n"]}
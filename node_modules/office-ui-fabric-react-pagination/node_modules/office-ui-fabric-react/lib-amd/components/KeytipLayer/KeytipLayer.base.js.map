{"version":3,"file":"KeytipLayer.base.js","sourceRoot":"../src/","sources":["components/KeytipLayer/KeytipLayer.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { IKeytipLayerProps, IKeytipLayerStyles, IKeytipLayerStyleProps } from './KeytipLayer.types';\nimport { getLayerStyles } from './KeytipLayer.styles';\nimport { Keytip, IKeytipProps } from '../../Keytip';\nimport { Layer } from '../../Layer';\nimport {\n  BaseComponent,\n  classNamesFunction,\n  getDocument,\n  arraysEqual\n} from '../../Utilities';\nimport { KeytipManager } from '../../utilities/keytips/KeytipManager';\nimport { KeytipTree } from './KeytipTree';\nimport { IKeytipTreeNode } from './IKeytipTreeNode';\nimport {\n  ktpTargetFromId,\n  sequencesToID,\n  mergeOverflows\n} from '../../utilities/keytips/KeytipUtils';\nimport {\n  transitionKeysContain,\n  KeytipTransitionModifier,\n  IKeytipTransitionKey\n} from '../../utilities/keytips/IKeytipTransitionKey';\nimport {\n  KeytipEvents,\n  KTP_LAYER_ID,\n  KTP_ARIA_SEPARATOR\n} from '../../utilities/keytips/KeytipConstants';\n\nexport interface IKeytipLayerState {\n  inKeytipMode: boolean;\n  keytips: IKeytipProps[];\n  visibleKeytips: IKeytipProps[];\n}\n\nconst isMac = typeof navigator !== 'undefined' && navigator.userAgent.indexOf('Macintosh') >= 0;\n\n// Default sequence is Alt-Windows (Alt-Meta) in Windows, Option-Control (Alt-Control) in Mac\nconst defaultStartSequence: IKeytipTransitionKey = {\n  key: isMac ? 'Control' : 'Meta', modifierKeys: [KeytipTransitionModifier.alt]\n};\n\n// Default exit sequence is the same as the start sequence\nconst defaultExitSequence: IKeytipTransitionKey = defaultStartSequence;\n\n// Default return sequence is Escape\nconst defaultReturnSequence: IKeytipTransitionKey = {\n  key: 'Escape'\n};\n\nconst getClassNames = classNamesFunction<IKeytipLayerStyleProps, IKeytipLayerStyles>();\n\n/**\n * A layer that holds all keytip items\n *\n * @export\n * @class KeytipLayer\n * @extends {BaseComponent<IKeytipLayerProps>}\n */\nexport class KeytipLayerBase extends BaseComponent<IKeytipLayerProps, IKeytipLayerState> {\n  public static defaultProps: IKeytipLayerProps = {\n    keytipStartSequences: [defaultStartSequence],\n    keytipExitSequences: [defaultExitSequence],\n    keytipReturnSequences: [defaultReturnSequence],\n    content: ''\n  };\n\n  private _keytipTree: KeytipTree;\n\n  private _keytipManager: KeytipManager = KeytipManager.getInstance();\n  private _classNames: { [key in keyof IKeytipLayerStyles]: string };\n  private _currentSequence: string;\n  private _newCurrentKeytipSequences?: string[];\n\n  private _delayedKeytipQueue: string[] = [];\n  private _delayedQueueTimeout: number;\n\n  private _keyHandled = false;\n\n  // tslint:disable-next-line:no-any\n  constructor(props: IKeytipLayerProps, context: any) {\n    super(props, context);\n\n    const managerKeytips = [...this._keytipManager.getKeytips()];\n    this.state = {\n      inKeytipMode: false,\n      // Get the initial set of keytips\n      keytips: managerKeytips,\n      visibleKeytips: this._getVisibleKeytips(managerKeytips)\n    };\n\n    this._keytipTree = new KeytipTree();\n    // Add regular and persisted keytips to the tree\n    for (const uniqueKeytip of this._keytipManager.keytips.concat(this._keytipManager.persistedKeytips)) {\n      this._keytipTree.addNode(uniqueKeytip.keytip, uniqueKeytip.uniqueID);\n    }\n\n    this._currentSequence = '';\n\n    // Add keytip listeners\n    this._events.on(this._keytipManager, KeytipEvents.KEYTIP_ADDED, this._onKeytipAdded);\n    this._events.on(this._keytipManager, KeytipEvents.KEYTIP_UPDATED, this._onKeytipUpdated);\n    this._events.on(this._keytipManager, KeytipEvents.KEYTIP_REMOVED, this._onKeytipRemoved);\n    this._events.on(this._keytipManager, KeytipEvents.PERSISTED_KEYTIP_ADDED, this._onPersistedKeytipAdded);\n    this._events.on(this._keytipManager, KeytipEvents.PERSISTED_KEYTIP_REMOVED, this._onPersistedKeytipRemoved);\n    this._events.on(this._keytipManager, KeytipEvents.PERSISTED_KEYTIP_EXECUTE, this._onPersistedKeytipExecute);\n  }\n\n  public render(): JSX.Element {\n    const {\n      content,\n      getStyles\n    } = this.props;\n\n    const {\n      keytips,\n      visibleKeytips\n    } = this.state;\n\n    this._classNames = getClassNames(\n      getStyles!\n    );\n\n    return (\n      <Layer getStyles={ getLayerStyles }>\n        <span id={ KTP_LAYER_ID } className={ this._classNames.innerContent }>{ `${content}${KTP_ARIA_SEPARATOR}` }</span>\n        { keytips && keytips.map((keytipProps: IKeytipProps, index: number) => {\n          return (\n            <span\n              key={ index }\n              id={ sequencesToID(keytipProps.keySequences) }\n              className={ this._classNames.innerContent }\n            >\n              { keytipProps.keySequences.join(KTP_ARIA_SEPARATOR) }\n            </span>\n          );\n        }) }\n        { visibleKeytips && visibleKeytips.map((visibleKeytipProps: IKeytipProps) => {\n          return <Keytip key={ sequencesToID(visibleKeytipProps.keySequences) } { ...visibleKeytipProps } />;\n        }) }\n      </Layer>\n    );\n  }\n\n  public componentDidMount(): void {\n    // Add window listeners\n    this._events.on(window, 'mouseup', this._onDismiss, true /* useCapture */);\n    this._events.on(window, 'resize', this._onDismiss);\n    this._events.on(window, 'keydown', this._onKeyDown, true /* useCapture */);\n    this._events.on(window, 'keypress', this._onKeyPress, true /* useCapture */);\n    this._events.on(window, 'scroll', this._onDismiss, true /* useCapture */);\n\n    // Add keytip listeners\n    this._events.on(this._keytipManager, KeytipEvents.ENTER_KEYTIP_MODE, this._enterKeytipMode);\n    this._events.on(this._keytipManager, KeytipEvents.EXIT_KEYTIP_MODE, this._exitKeytipMode);\n  }\n\n  public componentWillUnmount(): void {\n    // Remove window listeners\n    this._events.off(window, 'mouseup', this._onDismiss, true /* useCapture */);\n    this._events.off(window, 'resize', this._onDismiss);\n    this._events.off(window, 'keydown', this._onKeyDown, true /* useCapture */);\n    this._events.off(window, 'keypress', this._onKeyPress, true /* useCapture */);\n    this._events.off(window, 'scroll', this._onDismiss, true /* useCapture */);\n\n    // Remove keytip listeners\n    this._events.off(this._keytipManager, KeytipEvents.KEYTIP_ADDED, this._onKeytipAdded);\n    this._events.off(this._keytipManager, KeytipEvents.KEYTIP_UPDATED, this._onKeytipUpdated);\n    this._events.off(this._keytipManager, KeytipEvents.KEYTIP_REMOVED, this._onKeytipRemoved);\n    this._events.off(this._keytipManager, KeytipEvents.PERSISTED_KEYTIP_ADDED, this._onPersistedKeytipAdded);\n    this._events.off(this._keytipManager, KeytipEvents.PERSISTED_KEYTIP_REMOVED, this._onPersistedKeytipRemoved);\n    this._events.off(this._keytipManager, KeytipEvents.PERSISTED_KEYTIP_EXECUTE, this._onPersistedKeytipExecute);\n    this._events.off(this._keytipManager, KeytipEvents.ENTER_KEYTIP_MODE, this._enterKeytipMode);\n    this._events.off(this._keytipManager, KeytipEvents.EXIT_KEYTIP_MODE, this._exitKeytipMode);\n  }\n\n  // The below public functions are only public for testing purposes\n  // They are not intended to be used in app code by using a KeytipLayer reference\n\n  public getCurrentSequence(): string {\n    return this._currentSequence;\n  }\n\n  public getKeytipTree(): KeytipTree {\n    return this._keytipTree;\n  }\n\n  /**\n   * Processes an IKeytipTransitionKey entered by the user\n   *\n   * @param transitionKey - IKeytipTransitionKey received by the layer to process\n   */\n  public processTransitionInput(transitionKey: IKeytipTransitionKey): void {\n    const currKtp = this._keytipTree.currentKeytip;\n    if (transitionKeysContain(this.props.keytipExitSequences!, transitionKey) && currKtp) {\n      // If key sequence is in 'exit sequences', exit keytip mode\n      this._keyHandled = true;\n      this._exitKeytipMode();\n    } else if (transitionKeysContain(this.props.keytipReturnSequences!, transitionKey)) {\n      // If key sequence is in return sequences, move currentKeytip to parent (or if currentKeytip is the root, exit)\n      if (currKtp) {\n        this._keyHandled = true;\n        if (currKtp.id === this._keytipTree.root.id) {\n          // We are at the root, exit keytip mode\n          this._exitKeytipMode();\n        } else {\n          // If this keytip has a onReturn prop, we execute the func.\n          if (currKtp.onReturn) {\n            currKtp.onReturn(this._getKeytipDOMElement(currKtp.id));\n          }\n\n          // Reset currentSequence\n          this._currentSequence = '';\n          // Return pointer to its parent\n          this._keytipTree.currentKeytip = this._keytipTree.getNode(currKtp.parent);\n          // Show children keytips of the new currentKeytip\n          this.showKeytips(this._keytipTree.getChildren());\n        }\n      }\n    } else if (transitionKeysContain(this.props.keytipStartSequences!, transitionKey) && !currKtp) {\n      // If key sequence is in 'entry sequences' and currentKeytip is null, we enter keytip mode\n      this._keyHandled = true;\n      this._enterKeytipMode();\n    }\n  }\n\n  /**\n   * Processes inputs from the document listener and traverse the keytip tree\n   *\n   * @param key - Key pressed by the user\n   */\n  public processInput(key: string): void {\n    // Concat the input key with the current sequence\n    const currSequence: string = this._currentSequence + key;\n    let currKtp = this._keytipTree.currentKeytip;\n\n    // currentKeytip must be defined, otherwise we haven't entered keytip mode yet\n    if (currKtp) {\n      const node = this._keytipTree.getExactMatchedNode(currSequence, currKtp);\n      if (node) {\n        this._keytipTree.currentKeytip = currKtp = node;\n        const currKtpChildren = this._keytipTree.getChildren();\n\n        // Execute this node's onExecute if defined\n        if (currKtp.onExecute) {\n          currKtp.onExecute(this._getKeytipDOMElement(currKtp.id));\n          // Reset currKtp, this might have changed from the onExecute\n          currKtp = this._keytipTree.currentKeytip;\n        }\n\n        // To exit keytipMode after executing the keytip it must not have a menu or have dynamic children\n        if (currKtpChildren.length === 0 && !(currKtp.hasDynamicChildren || currKtp.hasMenu)) {\n          this._exitKeytipMode();\n        } else {\n          // Show all children keytips\n          this.showKeytips(currKtpChildren);\n        }\n\n        // Clear currentSequence\n        this._currentSequence = '';\n        return;\n      }\n\n      const partialNodes = this._keytipTree.getPartiallyMatchedNodes(currSequence, currKtp);\n      if (partialNodes.length > 0) {\n        // We found nodes that partially match the sequence, so we show only those\n        // Omit showing persisted nodes here\n        const ids = partialNodes.filter((partialNode: IKeytipTreeNode) => {\n          return !partialNode.persisted;\n        }).map((partialNode: IKeytipTreeNode) => { return partialNode.id; });\n        this.showKeytips(ids);\n\n        // Save currentSequence\n        this._currentSequence = currSequence;\n      }\n    }\n  }\n\n  /**\n   * Show the given keytips and hide all others\n   *\n   * @param ids - Keytip IDs to show\n   */\n  public showKeytips(ids: string[]): void {\n    // Update the visible prop in the manager\n    for (const keytip of this._keytipManager.getKeytips()) {\n      const keytipId = sequencesToID(keytip.keySequences);\n      if (ids.indexOf(keytipId) >= 0) {\n        keytip.visible = true;\n      } else if (keytip.overflowSetSequence && ids.indexOf(\n        sequencesToID(\n          mergeOverflows(keytip.keySequences, keytip.overflowSetSequence))) >= 0) {\n        // Check if the ID with the overflow is the keytip we're looking for\n        keytip.visible = true;\n      } else {\n        keytip.visible = false;\n      }\n    }\n    // Apply the manager changes to the Layer state\n    this._setKeytips();\n  }\n\n  /**\n   * Enters keytip mode for this layer\n   */\n  private _enterKeytipMode(): void {\n    if (this._keytipManager.shouldEnterKeytipMode) {\n      this._keytipTree.currentKeytip = this._keytipTree.root;\n      // Show children of root\n      this.showKeytips(this._keytipTree.getChildren());\n\n      this._setInKeytipMode(true /* inKeytipMode */);\n\n      if (this.props.onEnterKeytipMode) {\n        this.props.onEnterKeytipMode();\n      }\n    }\n  }\n\n  /**\n   * Exits keytip mode for this layer\n   */\n  private _exitKeytipMode(): void {\n    this._keytipTree.currentKeytip = undefined;\n    this._currentSequence = '';\n    // Hide all keytips\n    this.showKeytips([]);\n\n    // Reset the delayed keytips if any\n    this._delayedQueueTimeout && this._async.clearTimeout(this._delayedQueueTimeout);\n    this._delayedKeytipQueue = [];\n\n    this._setInKeytipMode(false /* inKeytipMode */);\n\n    if (this.props.onExitKeytipMode) {\n      this.props.onExitKeytipMode();\n    }\n  }\n\n  /**\n   * Sets the keytips state property\n   *\n   * @param keytipProps - Keytips to set in this layer\n   */\n  private _setKeytips(keytipProps: IKeytipProps[] = this._keytipManager.getKeytips()) {\n    this.setState({ keytips: keytipProps, visibleKeytips: this._getVisibleKeytips(keytipProps) });\n  }\n\n  /**\n   * Callback function to use for persisted keytips\n   *\n   * @param overflowButtonSequences - The overflow button sequence to execute\n   * @param keytipSequences - The keytip that should become the 'currentKeytip' when it is registered\n   */\n  private _persistedKeytipExecute(overflowButtonSequences: string[], keytipSequences: string[]) {\n    // Save newCurrentKeytip for later\n    this._newCurrentKeytipSequences = keytipSequences;\n\n    // Execute the overflow button's onExecute\n    const overflowKeytipNode = this._keytipTree.getNode(sequencesToID(overflowButtonSequences));\n    if (overflowKeytipNode && overflowKeytipNode.onExecute) {\n      overflowKeytipNode.onExecute(this._getKeytipDOMElement(overflowKeytipNode.id));\n    }\n  }\n\n  private _getVisibleKeytips(keytips: IKeytipProps[]): IKeytipProps[] {\n    return keytips.filter((keytip: IKeytipProps) => {\n      return keytip.visible;\n    });\n  }\n\n  private _onDismiss = (ev?: React.MouseEvent<HTMLElement>): void => {\n    // if we are in keytip mode, then exit keytip mode\n    if (this.state.inKeytipMode) {\n      this._exitKeytipMode();\n    }\n  }\n\n  private _onKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\n    this._keyHandled = false;\n    // using key since which has been deprecated and key is now widely suporrted.\n    // See: https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/which\n    let key = ev.key;\n    switch (key) {\n      case 'Alt':\n        // ALT puts focus in the browser bar, so it should not be used as a key for keytips.\n        // It can be used as a modifier\n        break;\n      case 'Tab':\n      case 'Enter':\n      case 'Spacebar':\n      case ' ':\n      case 'ArrowUp':\n      case 'Up':\n      case 'ArrowDown':\n      case 'Down':\n      case 'ArrowLeft':\n      case 'Left':\n      case 'ArrowRight':\n      case 'Right':\n        if (this.state.inKeytipMode) {\n          this._keyHandled = true;\n          this._exitKeytipMode();\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n        break;\n      default:\n        // Special cases for browser-specific keys that are not at standard\n        // (according to http://www.w3.org/TR/uievents-key/#keys-navigation)\n        if (key === 'Esc') {\n          // Edge: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/5290772/\n          key = 'Escape';\n        } else if (key === 'OS' || key === 'Win') {\n          // Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1232918\n          // Edge: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8860571/\n          // and https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/16424492/\n          key = 'Meta';\n        }\n        const transitionKey: IKeytipTransitionKey = { key };\n        transitionKey.modifierKeys = this._getModifierKey(key, ev);\n        this.processTransitionInput(transitionKey);\n        break;\n    }\n  }\n\n  /**\n   * Gets the ModifierKeyCodes based on the keyboard event\n   *\n   * @param ev - React.KeyboardEvent\n   * @returns List of ModifierKeyCodes that were pressed\n   */\n  private _getModifierKey(key: string, ev: React.KeyboardEvent<HTMLElement>): KeytipTransitionModifier[] | undefined {\n    const modifierKeys = [];\n    if (ev.altKey && key !== 'Alt') {\n      modifierKeys.push(KeytipTransitionModifier.alt);\n    }\n    if (ev.ctrlKey && key !== 'Control') {\n      modifierKeys.push(KeytipTransitionModifier.ctrl);\n    }\n    if (ev.shiftKey && key !== 'Shift') {\n      modifierKeys.push(KeytipTransitionModifier.shift);\n    }\n    if (ev.metaKey && key !== 'Meta') {\n      modifierKeys.push(KeytipTransitionModifier.meta);\n    }\n    return modifierKeys.length ? modifierKeys : undefined;\n  }\n\n  private _onKeyPress = (ev: React.KeyboardEvent<HTMLElement>): void => {\n    if (this.state.inKeytipMode && !this._keyHandled) {\n      // Call processInput\n      this.processInput(ev.key.toLocaleLowerCase());\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n  }\n\n  private _onKeytipAdded = (eventArgs: any) => {\n    const keytipProps = eventArgs.keytip;\n    const uniqueID = eventArgs.uniqueID;\n\n    this._keytipTree.addNode(keytipProps, uniqueID);\n    this._setKeytips();\n\n    // Add the keytip to the queue to show later\n    if (this._keytipTree.isCurrentKeytipParent(keytipProps)) {\n      this._addKeytipToQueue(sequencesToID(keytipProps.keySequences));\n    }\n\n    if (this._newCurrentKeytipSequences && arraysEqual(keytipProps.keySequences, this._newCurrentKeytipSequences)) {\n      this._triggerKeytipImmediately(keytipProps);\n    }\n\n    if (this._isCurrentKeytipAnAlias(keytipProps)) {\n      let keytipSequence = keytipProps.keySequences;\n      if (keytipProps.overflowSetSequence) {\n        keytipSequence = mergeOverflows(keytipSequence, keytipProps.overflowSetSequence);\n      }\n      this._keytipTree.currentKeytip = this._keytipTree.getNode(sequencesToID(keytipSequence));\n    }\n  }\n\n  private _onKeytipUpdated = (eventArgs: any) => {\n    const keytipProps = eventArgs.keytip;\n    const uniqueID = eventArgs.uniqueID;\n    this._keytipTree.updateNode(keytipProps, uniqueID);\n    this._setKeytips();\n  }\n\n  private _onKeytipRemoved = (eventArgs: any) => {\n    const keytipProps = eventArgs.keytip;\n    const uniqueID = eventArgs.uniqueID;\n\n    // Remove keytip from the delayed queue\n    this._removeKeytipFromQueue(sequencesToID(keytipProps.keySequences));\n\n    // Remove the node from the Tree\n    this._keytipTree.removeNode(keytipProps, uniqueID);\n    this._setKeytips();\n  }\n\n  private _onPersistedKeytipAdded = (eventArgs: any) => {\n    const keytipProps = eventArgs.keytip;\n    const uniqueID = eventArgs.uniqueID;\n    this._keytipTree.addNode(keytipProps, uniqueID, true);\n  }\n\n  private _onPersistedKeytipRemoved = (eventArgs: any) => {\n    const keytipProps = eventArgs.keytip;\n    const uniqueID = eventArgs.uniqueID;\n    this._keytipTree.removeNode(keytipProps, uniqueID);\n  }\n\n  private _onPersistedKeytipExecute = (eventArgs: any) => {\n    this._persistedKeytipExecute(eventArgs.overflowButtonSequences, eventArgs.keytipSequences);\n  }\n\n  /**\n   * Trigger a keytip immediately and set it as the current keytip\n   *\n   * @param keytipProps - Keytip to trigger immediately\n   */\n  private _triggerKeytipImmediately(keytipProps: IKeytipProps) {\n    // This keytip should become the currentKeytip and should execute right away\n    let keytipSequence = [...keytipProps.keySequences];\n    if (keytipProps.overflowSetSequence) {\n      keytipSequence = mergeOverflows(keytipSequence, keytipProps.overflowSetSequence);\n    }\n\n    // Set currentKeytip\n    this._keytipTree.currentKeytip = this._keytipTree.getNode(sequencesToID(keytipSequence));\n    if (this._keytipTree.currentKeytip) {\n      // Show all children keytips if any\n      const children = this._keytipTree.getChildren();\n      if (children.length) {\n        this.showKeytips(children);\n      }\n\n      if (this._keytipTree.currentKeytip.onExecute) {\n        this._keytipTree.currentKeytip.onExecute(this._getKeytipDOMElement(this._keytipTree.currentKeytip.id));\n      }\n    }\n\n    // Unset _newCurrKtpSequences\n    this._newCurrentKeytipSequences = undefined;\n  }\n\n  private _addKeytipToQueue(keytipID: string) {\n    // Add keytip\n    this._delayedKeytipQueue.push(keytipID);\n    // Clear timeout\n    this._delayedQueueTimeout && this._async.clearTimeout(this._delayedQueueTimeout);\n    // Reset timeout\n    this._delayedQueueTimeout = this._async.setTimeout(() => {\n      if (this._delayedKeytipQueue.length) {\n        this.showKeytips(this._delayedKeytipQueue);\n        this._delayedKeytipQueue = [];\n      }\n    }, 300);\n  }\n\n  private _removeKeytipFromQueue(keytipID: string) {\n    const index = this._delayedKeytipQueue.indexOf(keytipID);\n    if (index >= 0) {\n      // Remove keytip\n      this._delayedKeytipQueue.splice(index, 1);\n      // Clear timeout\n      this._delayedQueueTimeout && this._async.clearTimeout(this._delayedQueueTimeout);\n      // Reset timeout\n      this._delayedQueueTimeout = this._async.setTimeout(() => {\n        if (this._delayedKeytipQueue.length) {\n          this.showKeytips(this._delayedKeytipQueue);\n          this._delayedKeytipQueue = [];\n        }\n      }, 300);\n    }\n  }\n\n  /**\n   * Gets the DOM element for the specified keytip\n   *\n   * @param keytipId - ID of the keytip to query for\n   * @returns {HTMLElement | null} DOM element of the keytip if found\n   */\n  private _getKeytipDOMElement(keytipId: string): HTMLElement | null {\n    const dataKtpExecuteTarget = ktpTargetFromId(keytipId);\n    return getDocument()!.querySelector(dataKtpExecuteTarget);\n  }\n\n  /**\n   * Returns T/F if the keytipProps keySequences match the currentKeytip, and the currentKeytip is in an overflow well\n   * This will make 'keytipProps' the new currentKeytip\n   *\n   * @param keytipProps - Keytip props to check\n   * @returns {boolean} - T/F if this keytip should become the currentKeytip\n   */\n  private _isCurrentKeytipAnAlias(keytipProps: IKeytipProps): boolean {\n    const currKtp = this._keytipTree.currentKeytip;\n    if (currKtp && (currKtp.overflowSetSequence || currKtp.persisted) && arraysEqual(keytipProps.keySequences, currKtp.keySequences)) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Sets if we are in keytip mode.\n   * Note, this sets both the state for the layer as well as\n   * the value that the manager will expose externally.\n   * @param inKeytipMode - Boolean so set whether we are in keytip mode or not\n   */\n  private _setInKeytipMode = (inKeytipMode: boolean): void => {\n    this.setState({ inKeytipMode: inKeytipMode });\n    this._keytipManager.inKeytipMode = inKeytipMode;\n  }\n}"]}
{"version":3,"file":"Nav.base.js","sourceRoot":"../src/","sources":["components/Nav/Nav.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  BaseComponent,\n  classNamesFunction,\n  createRef,\n  customizable,\n  divProperties,\n  getNativeProps\n} from '../../Utilities';\nimport { FocusZone, FocusZoneDirection, IFocusZone } from '../../FocusZone';\nimport { ActionButton } from '../../Button';\nimport { Icon } from '../../Icon';\nimport { buttonStyles } from './Nav.styles';\nimport {\n  INav,\n  INavProps,\n  INavLinkGroup,\n  INavLink,\n  INavStyles,\n  INavStyleProps\n} from './Nav.types';\n\n// The number pixels per indentation level for Nav links.\nconst _indentationSize = 14;\n\n// The number of pixels of left margin\nconst _baseIndent = 3;\n\n// global var used in _isLinkSelectedKey\nlet _urlResolver: HTMLAnchorElement | undefined;\n\nexport function isRelativeUrl(url: string): boolean {\n  // A URL is relative if it has no protocol.\n  return !!url && !/^[a-z0-9+-.]:\\/\\//i.test(url);\n}\n\nconst getClassNames = classNamesFunction<INavStyleProps, INavStyles>();\n\nexport interface INavState {\n  isGroupCollapsed?: { [key: string]: boolean };\n  isLinkExpandStateChanged?: boolean;\n  selectedKey?: string;\n}\n\n@customizable('Nav', ['theme'])\nexport class NavBase extends BaseComponent<INavProps, INavState> implements INav {\n\n  public static defaultProps: INavProps = {\n    groups: null\n  };\n\n  private _focusZone = createRef<IFocusZone>();\n  constructor(props: INavProps) {\n    super(props);\n\n    this.state = {\n      isGroupCollapsed: {},\n      isLinkExpandStateChanged: false,\n      selectedKey: props.initialSelectedKey || props.selectedKey,\n    };\n\n    if (props.groups) {\n      for (const group of props.groups) {\n        if (group.collapseByDefault && group.name) {\n          this.state.isGroupCollapsed![group.name] = true;\n        }\n      }\n    }\n  }\n\n  public componentWillReceiveProps(newProps: INavProps): void {\n    const newGroups = newProps.groups || [];\n    const isGroupCollapsed = this.state.isGroupCollapsed!;\n\n    // If the component's props were updated, new groups may have been added, which may have\n    // collapseByDefault set. Ensure that setting is respected for any new groups.\n    // (If isGroupCollapsed is already set for a group, don't overwrite that.)\n    let hasUpdated = false;\n    for (const newGroup of newGroups) {\n      if (newGroup.name && newGroup.collapseByDefault && !isGroupCollapsed.hasOwnProperty(newGroup.name)) {\n        isGroupCollapsed[newGroup.name] = true;\n        hasUpdated = true;\n      }\n    }\n\n    if (hasUpdated) {\n      this.setState({\n        isGroupCollapsed: isGroupCollapsed\n      });\n    }\n  }\n\n  public render(): JSX.Element | null {\n    const { getStyles, groups, className, isOnTop, theme } = this.props;\n\n    if (!groups) {\n      return null;\n    }\n\n    const groupElements: React.ReactElement<{}>[] = groups.map(this._renderGroup);\n\n    const classNames = getClassNames(getStyles!, { theme: theme!, className, isOnTop, groups });\n\n    return (\n      <FocusZone direction={ FocusZoneDirection.vertical } ref={ this._focusZone }>\n        <nav\n          role='navigation'\n          className={ classNames.root }\n          aria-label={ this.props.ariaLabel }\n        >\n          { groupElements }\n        </nav>\n      </FocusZone>\n    );\n  }\n\n  public get selectedKey(): string | undefined {\n    return this.state.selectedKey;\n  }\n\n  /**\n   * Sets focus to the first tabbable item in the zone.\n   * @param forceIntoFirstElement - If true, focus will be forced into the first element, even\n   * if focus is already in the focus zone.\n   * @returns True if focus could be set to an active element, false if no operation was taken.\n   */\n  public focus(forceIntoFirstElement: boolean = false): boolean {\n    if (this._focusZone && this._focusZone.value) {\n      return this._focusZone.value.focus(forceIntoFirstElement);\n    }\n\n    return false;\n  }\n\n  private _onRenderLink = (link: INavLink): JSX.Element => {\n    const { getStyles, groups, theme } = this.props;\n    const classNames = getClassNames(getStyles!, { theme: theme!, groups });\n    return (<div className={ classNames.linkText }>{ link.name }</div>);\n  }\n\n  private _renderNavLink(link: INavLink, linkIndex: number, nestingLevel: number): JSX.Element {\n    const {\n      getStyles,\n      groups,\n      theme,\n      onRenderLink = this._onRenderLink\n    } = this.props;\n\n    const classNames = getClassNames(getStyles!, {\n      theme: theme!,\n      isSelected: this._isLinkSelected(link),\n      isButtonEntry: link.onClick && !link.forceAnchor,\n      leftPadding: _indentationSize * nestingLevel + _baseIndent,\n      groups\n    });\n\n    // Prevent hijacking of the parent window if link.target is defined\n    const rel = link.url && link.target && !isRelativeUrl(link.url) ? 'noopener noreferrer' : undefined;\n\n    return (\n      <ActionButton\n        className={ classNames.link }\n        styles={ buttonStyles }\n        href={ link.url || (link.forceAnchor ? 'javascript:' : undefined) }\n        iconProps={ link.iconProps || { iconName: link.icon || '' } }\n        ariaDescription={ link.title || link.name }\n        onClick={ link.onClick ? this._onNavButtonLinkClicked.bind(this, link) : this._onNavAnchorLinkClicked.bind(this, link) }\n        title={ link.title || link.name }\n        target={ link.target }\n        rel={ rel }\n        aria-label={ link.ariaLabel }\n      >\n        { onRenderLink(link, this._onRenderLink) }\n      </ActionButton>);\n  }\n\n  private _renderCompositeLink(link: INavLink, linkIndex: number, nestingLevel: number): React.ReactElement<{}> {\n    const divProps: React.HTMLProps<HTMLDivElement> = { ...getNativeProps(link, divProperties, ['onClick']) };\n    const { getStyles, groups, theme } = this.props;\n    const classNames = getClassNames(getStyles!, {\n      theme: theme!,\n      isExpanded: !!link.isExpanded,\n      isSelected: this._isLinkSelected(link),\n      isLink: true,\n      position: _indentationSize * nestingLevel + 1,\n      groups\n    });\n\n    return (\n      <div\n        { ...divProps }\n        key={ link.key || linkIndex }\n        className={ classNames.compositeLink }\n      >\n        { (link.links && link.links.length > 0 ?\n          <button\n            className={ classNames.chevronButton }\n            onClick={ this._onLinkExpandClicked.bind(this, link) }\n            aria-label={ this.props.expandButtonAriaLabel }\n            aria-expanded={ link.isExpanded ? 'true' : 'false' }\n          >\n            <Icon\n              className={ classNames.chevronIcon }\n              iconName='ChevronDown'\n            />\n          </button> : null\n        ) }\n        { this._renderNavLink(link, linkIndex, nestingLevel) }\n      </div>\n    );\n  }\n\n  private _renderLink(link: INavLink, linkIndex: number, nestingLevel: number): React.ReactElement<{}> {\n    const { getStyles, groups, theme } = this.props;\n    const classNames = getClassNames(getStyles!, { theme: theme!, groups });\n\n    return (\n      <li key={ link.key || linkIndex } role='listitem' className={ classNames.navItem }>\n        { this._renderCompositeLink(link, linkIndex, nestingLevel) }\n        { (link.isExpanded ? this._renderLinks(link.links, ++nestingLevel) : null) }\n      </li>\n    );\n  }\n\n  private _renderLinks(links: INavLink[] | undefined, nestingLevel: number): React.ReactElement<{}> | null {\n    if (!links || !links.length) {\n      return null;\n    }\n    const linkElements: React.ReactElement<{}>[] = links.map(\n      (link: INavLink, linkIndex: number) => this._renderLink(link, linkIndex, nestingLevel));\n\n    const { getStyles, groups, theme } = this.props;\n    const classNames = getClassNames(getStyles!, { theme: theme!, groups });\n\n    return (\n      <ul role='list' className={ classNames.navItems }>\n        { linkElements }\n      </ul>\n    );\n  }\n\n  private _renderGroup = (group: INavLinkGroup, groupIndex: number): React.ReactElement<{}> => {\n    const { getStyles, groups, theme } = this.props;\n    const classNames = getClassNames(getStyles!, {\n      theme: theme!,\n      isGroup: true,\n      isExpanded: !this.state.isGroupCollapsed![group.name!],\n      groups\n    });\n\n    return (\n      <div\n        key={ groupIndex }\n        className={ classNames.group }\n      >\n        { (group.name ?\n          <button\n            className={ classNames.chevronButton }\n            onClick={ this._onGroupHeaderClicked.bind(this, group) }\n          >\n            <Icon\n              className={ classNames.chevronIcon }\n              iconName='ChevronDown'\n            />\n            { group.name }\n          </button> : null)\n        }\n        <div className={ classNames.groupContent }>\n          { this._renderLinks(group.links, 0 /* nestingLevel */) }\n        </div>\n      </div>\n    );\n  }\n\n  private _onGroupHeaderClicked(group: INavLinkGroup, ev: React.MouseEvent<HTMLElement>): void {\n    const { isGroupCollapsed } = this.state;\n    const groupKey = group.name!;\n    const isCollapsed = !isGroupCollapsed![groupKey];\n\n    if (group.onHeaderClick) {\n      group.onHeaderClick(ev, isCollapsed);\n    }\n\n    isGroupCollapsed![groupKey] = isCollapsed;\n    this.setState({ isGroupCollapsed: isGroupCollapsed });\n\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  private _onLinkExpandClicked(link: INavLink, ev: React.MouseEvent<HTMLElement>): void {\n    const { onLinkExpandClick } = this.props;\n\n    if (onLinkExpandClick) {\n      onLinkExpandClick(ev, link);\n    }\n\n    if (!ev.defaultPrevented) {\n      link.isExpanded = !link.isExpanded;\n      this.setState({ isLinkExpandStateChanged: true });\n    }\n\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  private _onNavAnchorLinkClicked(link: INavLink, ev: React.MouseEvent<HTMLElement>): void {\n    if (this.props.onLinkClick) {\n      this.props.onLinkClick(ev, link);\n    }\n    if (!link.url && link.links && link.links.length > 0) {\n      this._onLinkExpandClicked(link, ev);\n    }\n\n    this.setState({ selectedKey: link.key });\n  }\n\n  private _onNavButtonLinkClicked(link: INavLink, ev: React.MouseEvent<HTMLElement>): void {\n    if (link.onClick) {\n      link.onClick(ev, link);\n    }\n    if (!link.url && link.links && link.links.length > 0) {\n      this._onLinkExpandClicked(link, ev);\n    }\n\n    this.setState({ selectedKey: link.key });\n  }\n\n  private _isLinkSelected(link: INavLink): boolean {\n    // if caller passes in selectedKey, use it as first choice or\n    // if current state.selectedKey (from addressbar) is match to the link\n    if (this.props.selectedKey !== undefined) {\n      return link.key === this.props.selectedKey;\n    } else if (this.state.selectedKey !== undefined && link.key === this.state.selectedKey) {\n      return true;\n    }\n\n    // resolve is not supported for ssr\n    if (typeof (window) === 'undefined') {\n      return false;\n    }\n\n    if (!link.url) {\n      return false;\n    }\n\n    _urlResolver = _urlResolver || document.createElement('a');\n\n    _urlResolver.href = link.url || '';\n    const target: string = _urlResolver.href;\n\n    if (location.href === target) {\n      return true;\n    }\n\n    if (location.protocol + '//' + location.host + location.pathname === target) {\n      return true;\n    }\n\n    if (location.hash) {\n      // Match the hash to the url.\n      if (location.hash === link.url) {\n        return true;\n      }\n\n      // Match a rebased url. (e.g. #foo becomes http://hostname/foo)\n      _urlResolver.href = location.hash.substring(1);\n\n      return _urlResolver.href === target;\n    }\n    return false;\n  }\n}\n"]}
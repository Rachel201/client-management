{"version":3,"file":"TooltipHost.js","sourceRoot":"../src/","sources":["components/Tooltip/TooltipHost.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  BaseComponent,\n  css,\n  divProperties,\n  getNativeProps,\n  getId,\n  assign,\n  hasOverflow,\n  createRef\n} from '../../Utilities';\nimport { ITooltipHostProps, TooltipOverflowMode } from './TooltipHost.types';\nimport { Tooltip } from './Tooltip';\nimport { TooltipDelay } from './Tooltip.types';\n\nimport * as stylesImport from './TooltipHost.scss';\nconst styles: any = stylesImport;\n\nexport interface ITooltipHostState {\n  isTooltipVisible: boolean;\n}\n\nexport class TooltipHost extends BaseComponent<ITooltipHostProps, ITooltipHostState> {\n  public static defaultProps = {\n    delay: TooltipDelay.medium\n  };\n\n  // The wrapping div that gets the hover events\n  private _tooltipHost = createRef<HTMLDivElement>();\n\n  // The ID of the setTimeout that will eventually close the tooltip if the\n  // the tooltip isn't hovered over.\n  private _closingTimer = -1;\n\n  // Constructor\n  constructor(props: ITooltipHostProps) {\n    super(props);\n\n    this.state = {\n      isTooltipVisible: false\n    };\n  }\n\n  // Render\n  public render(): JSX.Element {\n    const {\n      calloutProps,\n      children,\n      content,\n      delay,\n      directionalHint,\n      directionalHintForRTL,\n      hostClassName,\n      id,\n      setAriaDescribedBy = true,\n      tooltipProps\n    } = this.props;\n    const { isTooltipVisible } = this.state;\n    const tooltipId = id || getId('tooltip');\n    const isContentPresent = !!(content || (tooltipProps && tooltipProps.onRenderContent && tooltipProps.onRenderContent()));\n    const showTooltip = isTooltipVisible && isContentPresent;\n\n    return (\n      <div\n        className={ css('ms-TooltipHost',\n          styles.host,\n          hostClassName\n        ) }\n        ref={ this._tooltipHost }\n        { ...{ onFocusCapture: this._onTooltipMouseEnter } }\n        { ...{ onBlurCapture: this._hideTooltip } }\n        onMouseEnter={ this._onTooltipMouseEnter }\n        onMouseLeave={ this._onTooltipMouseLeave }\n        aria-describedby={ setAriaDescribedBy && isTooltipVisible && content ? tooltipId : undefined }\n      >\n        { children }\n        { showTooltip && (\n          <Tooltip\n            id={ tooltipId }\n            delay={ delay }\n            content={ content }\n            targetElement={ this._getTargetElement() }\n            directionalHint={ directionalHint }\n            directionalHintForRTL={ directionalHintForRTL }\n            calloutProps={ assign({},\n              calloutProps, {\n                onMouseEnter: this._onTooltipMouseEnter,\n                onMouseLeave: this._onTooltipMouseLeave\n              }) }\n            onMouseEnter={ this._onTooltipMouseEnter }\n            onMouseLeave={ this._onTooltipMouseLeave }\n            { ...getNativeProps(this.props, divProperties) }\n            { ...tooltipProps }\n          />\n        ) }\n      </div>\n    );\n  }\n\n  private _getTargetElement(): HTMLElement | undefined {\n    if (!this._tooltipHost.current) {\n      return undefined;\n    }\n\n    const { overflowMode } = this.props;\n\n    // Select target element based on overflow mode. For parent mode, you want to position the tooltip relative\n    // to the parent element, otherwise it might look off.\n    if (overflowMode !== undefined) {\n      switch (overflowMode) {\n        case TooltipOverflowMode.Parent:\n          return this._tooltipHost.current.parentElement!;\n\n        case TooltipOverflowMode.Self:\n          return this._tooltipHost.current;\n      }\n    }\n\n    return this._tooltipHost.current;\n  }\n\n  // Show Tooltip\n  private _onTooltipMouseEnter = (ev: any): void => {\n    const { overflowMode } = this.props;\n\n    if (overflowMode !== undefined) {\n      const overflowElement = this._getTargetElement();\n      if (overflowElement && !hasOverflow(overflowElement)) {\n        return;\n      }\n    }\n\n    this._toggleTooltip(true);\n    this._clearDismissTimer();\n  }\n\n  // Hide Tooltip\n  private _onTooltipMouseLeave = (ev: any): void => {\n    if (this.props.closeDelay) {\n      this._clearDismissTimer();\n\n      this._closingTimer = this._async.setTimeout(() => {\n        this._toggleTooltip(false);\n      }, this.props.closeDelay);\n    } else {\n      this._toggleTooltip(false);\n    }\n  }\n\n  private _clearDismissTimer = (): void => {\n    this._async.clearTimeout(this._closingTimer);\n  }\n\n  // Hide Tooltip\n  private _hideTooltip = (): void => {\n    this._toggleTooltip(false);\n  }\n\n  private _toggleTooltip(isTooltipVisible: boolean): void {\n    if (this.state.isTooltipVisible !== isTooltipVisible) {\n      this.setState(\n        { isTooltipVisible },\n        () => this.props.onTooltipToggle &&\n          this.props.onTooltipToggle(this.state.isTooltipVisible));\n    }\n  }\n}\n"]}
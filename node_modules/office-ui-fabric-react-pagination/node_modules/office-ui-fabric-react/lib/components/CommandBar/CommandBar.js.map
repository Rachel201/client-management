{"version":3,"file":"CommandBar.js","sourceRoot":"../src/","sources":["components/CommandBar/CommandBar.tsx"],"names":[],"mappings":";;;AAAA,6BAA+B;AAC/B,6CAQyB;AAEzB,6CAA4E;AAC5E,uDAAiG;AACjG,8DAAkE;AAElE,mCAGoB;AACpB,yCAA+C;AAC/C,yCAA4C;AAC5C,gDAAkD;AAClD,6CAA4C;AAC5C,+CAA8C;AAE9C,IAAM,MAAM,GAAQ,YAAY,CAAC;AAEjC,IAAM,YAAY,GAAG,UAAU,CAAC;AAChC,IAAM,cAAc,GAAG,IAAI,CAAC;AAY5B;IAAgC,sCAAiD;IAsB/E,oBAAY,KAAuB;QAAnC,YACE,kBAAM,KAAK,CAAC,SAKb;QAjBO,oBAAc,GAAG,qBAAS,EAAkB,CAAC;QAC7C,qBAAe,GAAG,qBAAS,EAAkB,CAAC;QAC9C,uBAAiB,GAAG,qBAAS,EAAkB,CAAC;QAChD,wBAAkB,GAAG,qBAAS,EAAkB,CAAC;QACjD,gBAAU,GAAG,qBAAS,EAAc,CAAC;QACrC,eAAS,GAAG,qBAAS,EAAkB,CAAC;QAuZxC,sBAAgB,GAAG,UAAC,EAAuC;YACjE,IAAI,KAAI,CAAC,KAAK,CAAC,mBAAmB,KAAK,YAAY,EAAE;gBACnD,KAAI,CAAC,qBAAqB,EAAE,CAAC;aAC9B;iBAAM;gBACL,KAAI,CAAC,QAAQ,CAAC;oBACZ,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,EAAE;oBACnC,mBAAmB,EAAE,YAAY;oBACjC,mBAAmB,uBAAO,KAAI,CAAC,KAAK,CAAC,iBAAkB,IAAE,KAAK,EAAE,KAAI,CAAC,KAAK,CAAC,qBAAsB,GAAE;oBACnG,oBAAoB,EAAE,EAAE,CAAC,aAAa;iBACvC,CAAC,CAAC;aACJ;QACH,CAAC,CAAA;QAEO,2BAAqB,GAAG,UAAC,EAAQ;YAC/B,IAAA,8CAAuB,CAA0B;YAEzD,IAAI,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,aAAa,IAAI,cAAc,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,CAAC,aAA4B,CAAC,EAAE;gBACnG,IAAA,qDAAmB,CAAgB;gBAE3C,IAAI,mBAAmB,IAAI,mBAAmB,CAAC,SAAS,EAAE;oBACxD,mBAAoB,CAAC,SAAU,CAAC,EAAE,CAAC,CAAC;iBACrC;gBAED,KAAI,CAAC,QAAQ,CAAC;oBACZ,mBAAmB,EAAE,SAAS;oBAC9B,mBAAmB,EAAE,SAAS;oBAC9B,oBAAoB,EAAE,SAAS;iBAChC,CAAC,CAAC;aACJ;iBAAM;gBACL,EAAE,CAAC,eAAe,EAAE,CAAC;gBACrB,EAAE,CAAC,cAAc,EAAE,CAAC;aACrB;QACH,CAAC,CAAA;QA9aC,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAE5C,KAAI,CAAC,GAAG,GAAG,iBAAK,CAAC,YAAY,CAAC,CAAC;;IACjC,CAAC;IAEM,sCAAiB,GAAxB;QACE,kFAAkF;QAClF,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAC/D,CAAC;IAEM,8CAAyB,GAAhC,UAAiC,SAA2B;QAC1D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;IACjC,CAAC;IAEM,uCAAkB,GAAzB,UAA0B,SAA2B,EAAE,UAA4B;QACjF,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;YAC5B,kFAAkF;YAClF,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;IACH,CAAC;IAEM,2BAAM,GAAb;QAAA,iBA4EC;QA3EO,IAAA,eAAqE,EAAnE,0CAAkB,EAAE,gDAAqB,EAAE,wBAAS,CAAgB;QACtE,IAAA,eAAuJ,EAArJ,gCAAa,EAAE,4CAAmB,EAAE,4CAAmB,EAAE,kCAAc,EAAE,gDAAqB,EAAE,8CAAoB,EAAE,sCAAgB,CAAgB;QAC9J,IAAI,SAAS,CAAC;QAEd,IAAI,kBAAkB,EAAE;YACtB,SAAS,GAAG,CACV,6BAAK,SAAS,EAAG,eAAG,CAAC,qBAAqB,EAAE,MAAM,CAAC,MAAM,CAAC,EAAG,GAAG,EAAG,IAAI,CAAC,cAAc;gBACpF,+BAAO,SAAS,EAAG,eAAG,CAAC,2BAA2B,EAAE,MAAM,CAAC,WAAW,CAAC,EAAG,IAAI,EAAC,MAAM,EAAC,WAAW,EAAG,qBAAqB,GAAK;gBAC9H,6BACE,SAAS,EAAG,eAAG,CACb,uEAAuE,EACvE,MAAM,CAAC,iBAAiB,EAAE,MAAM,CAAC,uBAAuB,CAAC,IAEzD,oBAAC,WAAI,IAAC,QAAQ,EAAG,QAAQ,GAAK,CAC5B;gBACN,6BACE,SAAS,EAAG,eAAG,CACb,sEAAsE,EACtE,wBAAc,CAAC,KAAK,EACpB,MAAM,CAAC,iBAAiB,EACxB,MAAM,CAAC,sBAAsB,CAC9B;oBAED,oBAAC,WAAI,IAAC,QAAQ,EAAC,QAAQ,GAAG,CACtB,CACF,CACP,CAAC;SACH;QAED,OAAO,CACL,6BAAK,SAAS,EAAG,eAAG,CAAC,eAAe,EAAE,MAAM,CAAC,IAAI,EAAE,SAAS,CAAC,EAAG,GAAG,EAAG,IAAI,CAAC,iBAAiB;YACxF,SAAS;YACX,oBAAC,qBAAS,IAAC,YAAY,EAAG,IAAI,CAAC,UAAU,EAAG,SAAS,EAAG,MAAM,CAAC,SAAS,EAAG,SAAS,EAAG,8BAAkB,CAAC,UAAU,EAAG,IAAI,EAAC,SAAS;gBACnI,6BAAK,SAAS,EAAG,eAAG,CAAC,+BAA+B,EAAE,MAAM,CAAC,eAAe,CAAC,EAAG,GAAG,EAAG,IAAI,CAAC,eAAe,IACtG,aAAc,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,CAC3B,KAAI,CAAC,uBAAuB,CAAC,IAAI,EAAE,mBAAoB,CAAC,CACzD,EAF4B,CAE5B,CAAC,CAAC,MAAM,CAAC,CAAC,qBAAqB,IAAI,qBAAqB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;oBAClE,6BAAK,SAAS,EAAG,eAAG,CAAC,mBAAmB,EAAE,MAAM,CAAC,IAAI,CAAC,EAAG,GAAG,EAAG,YAAY,EAAG,GAAG,EAAG,IAAI,CAAC,SAAS;wBAChG,gCACE,IAAI,EAAC,QAAQ,EACb,EAAE,EAAG,IAAI,CAAC,GAAG,GAAG,YAAY,EAC5B,SAAS,EAAG,eAAG,CAAC,wBAAwB,EAAE,MAAM,CAAC,QAAQ;gCACvD,GAAC,cAAc,GAAG,MAAM,CAAC,kBAAkB,IAAG,CAAC,mBAAmB,KAAK,YAAY,CAAC;oCACpF,EACF,OAAO,EAAG,IAAI,CAAC,gBAAgB,EAC/B,IAAI,EAAC,UAAU,mBACC,IAAI,CAAC,KAAK,CAAC,mBAAmB,KAAK,YAAY,gBAClD,IAAI,CAAC,KAAK,CAAC,iBAAiB,IAAI,EAAE,mBAC/B,IAAI,wBACD,oBAAoB;4BAEvC,oBAAC,WAAI,IAAC,SAAS,EAAG,eAAG,CAAC,4BAA4B,EAAE,MAAM,CAAC,YAAY,CAAC,EAAG,QAAQ,EAAC,MAAM,GAAG,CACtF,CACL;iBACP,CAAC,CAAC,CAAC,EAAE,CAAC,CACH;gBACN,6BAAK,SAAS,EAAG,eAAG,CAAC,4BAA4B,EAAE,MAAM,CAAC,YAAY,CAAC,EAAG,GAAG,EAAG,IAAI,CAAC,kBAAkB,IACnG,gBAAiB,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,CAC9B,KAAI,CAAC,uBAAuB,CAAC,IAAI,EAAE,mBAAoB,EAAE,IAAI,CAAC,CAC/D,EAF+B,CAE/B,CAAC,CACE,CACI;YACV,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBACvB,CAAC,oBAAC,+BAAc,qBACd,SAAS,EAAG,wBAAwB,EACpC,eAAe,4BACV,mBAAmB,IACxB,MAAM,EAAG,oBAAoB,EAC7B,cAAc,EAAG,cAAc,EAC/B,SAAS,EAAG,IAAI,CAAC,qBAAqB,IACtC,CACD,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAEP,CACR,CAAC;;IACJ,CAAC;IAEM,0BAAK,GAAZ;QACU,IAAA,mCAAkB,CAAqB;QAC/C,SAAS,IAAI,SAAS,CAAC,KAAK,EAAE,CAAC;IACjC,CAAC;IAEO,4CAAuB,GAA/B,UAAgC,IAA0B,EAAE,mBAA2B,EAAE,SAAmB;QAA5G,iBA+JC;QA9JC,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,OAAO,CACL,6BAAK,SAAS,EAAG,eAAG,CAAC,mBAAmB,EAAE,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAG,GAAG,EAAG,IAAI,CAAC,GAAG,EAAG,GAAG,EAAG,IAAI,CAAC,GAAG,IACpG,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAC7C,CACP,CAAC;SACH;QAED,IAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC;QACzB,IAAM,MAAM,GAAG,IAAI,CAAC,OAAO,IAAI,kBAAU,CAAC,IAAI,CAAC,CAAC;QAChD,IAAM,SAAS,GAAG,eAAG,CACnB,MAAM,CAAC,CAAC,CAAC,CAAC,yBAAyB,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,yBAAyB,GAAG,MAAM,CAAC,QAAQ,CAAC,EACtG,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,4BAA4B,GAAG,MAAM,CAAC,gBAAgB,CAAC,EACtE,CAAC,mBAAmB,KAAK,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,kBAAkB,CAAC,EAClF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CACrC,CAAC;QAEF,IAAI,cAAc,GAAG,EAAE,CAAC;QAExB,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC;SAC7B;QAED,IAAM,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC;QAChD,IAAM,aAAa,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QACpD,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;QAC5E,IAAM,cAAc,GAAG,kBAAU,CAAC,IAAI,CAAC,CAAC;QAClC,IAAA,8BAAW,CAAU;QAC3B,IAAI,WAAW,IAAI,cAAc,EAAE;YACjC,WAAW,wBACN,WAAW,IACd,OAAO,EAAE,IAAI,GACd,CAAC;SACH;QAED,IAAI,OAAwB,CAAC;QAC7B,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,gEAAgE;YAChE,IAAM,aAAW,GAAG,0BAAc,CAAC,IAAI,EAAE,4BAAgB,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAChF,OAAO,GAAG,CACR,oBAAC,uBAAU,IACT,WAAW,EAAG,WAAW,EACzB,eAAe,EAAI,aAAmB,CAAC,kBAAkB,CAAC,EAC1D,QAAQ,EAAG,IAAI,CAAC,QAAQ,IAEtB,UAAC,gBAAqB,IAAkB,OAAA,CACxC,8CACO,aAAW,EACX,gBAAgB,IACrB,EAAE,EAAG,KAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,EACxB,SAAS,EAAG,SAAS,EACrB,IAAI,EAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAC5C,OAAO,EAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EACjC,KAAK,EAAG,EAAE,mBACM,IAAI,CAAC,QAAQ,sBACV,OAAO,mBACV,cAAc,EAC9B,IAAI,EAAC,UAAU,gBACF,SAAS;gBAEpB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC3C,aAAa,IAAI,CACjB,8BACE,SAAS,EAAG,eAAG,CAAC,+BAA+B,EAAE,MAAM,CAAC,eAAe,CAAC,IAEtE,IAAI,CAAC,IAAI,CACN,CACR,CACC,CACL,EAxByC,CAwBzC,CACU,CACd,CAAC;SACH;aAAM,IAAI,MAAM,EAAE;YACjB,IAAM,aAAW,GAAG,0BAAc,CAAC,IAAI,EAAE,4BAAgB,CAAC,CAAC;YAC3D,OAAO,GAAG,CACR,oBAAC,uBAAU,IACT,WAAW,EAAG,WAAW,EACzB,eAAe,EAAI,aAAmB,CAAC,kBAAkB,CAAC,EAC1D,QAAQ,EAAG,IAAI,CAAC,QAAQ,IAEtB,UAAC,gBAAqB,IAAkB,OAAA,CACxC,mDACO,aAAW,EACX,gBAAgB,IACrB,EAAE,EAAG,KAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,EACxB,SAAS,EAAG,SAAS,EACrB,OAAO,EAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EACjC,KAAK,EAAG,EAAE,mBACM,IAAI,CAAC,QAAQ,sBACV,OAAO,mBACV,cAAc,mBACd,cAAc,CAAC,CAAC,CAAC,mBAAmB,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,EAC7E,IAAI,EAAC,UAAU,gBACF,SAAS;gBAEpB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC3C,aAAa,IAAI,CACjB,8BACE,SAAS,EAAG,eAAG,CAAC,+BAA+B,EAAE,MAAM,CAAC,eAAe,CAAC,IAEtE,IAAI,CAAC,IAAI,CACN,CACR;gBACC,cAAc,CAAC,CAAC,CAAC,CACjB,oBAAC,WAAI,IAAC,SAAS,EAAG,eAAG,CAAC,+BAA+B,EAAE,MAAM,CAAC,eAAe,CAAC,EAAG,QAAQ,EAAC,aAAa,GAAG,CAC3G,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CACH,CACV,EA3ByC,CA2BzC,CAEW,CACf,CAAC;SACH;aAAM;YACL,6DAA6D;YAC7D,IAAM,WAAW,GAAG,0BAAc,CAAC,IAAI,EAAE,yBAAa,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC7E,OAAO,GAAG,CACR,gDACO,WAAW,IAChB,EAAE,EAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,EACxB,SAAS,EAAG,SAAS,EACrB,KAAK,EAAG,EAAE,mBACM,IAAI,CAAC,QAAQ,sBACV,OAAO,mBACV,cAAc,gBACjB,SAAS;gBAEpB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC3C,CAAC,aAAa,CAAC,IAAI,CACnB,8BACE,SAAS,EAAG,eAAG,CAAC,+BAA+B,EAAE,MAAM,CAAC,eAAe,CAAC,iBAC5D,MAAM,EAClB,IAAI,EAAC,cAAc,IAEjB,IAAI,CAAC,IAAI,CACN,CACR,CACG,CACP,CAAC;SACH;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,EAAE;YAC9B,OAAO,GAAG,CACR,oBAAC,qBAAW,IAAC,OAAO,EAAG,IAAI,CAAC,IAAI,IAC5B,OAAO,CACG,CACf,CAAC;SACH;aAAM,IAAI,cAAc,EAAE;YACzB,OAAO,GAAG,CACR,oBAAC,qBAAW,IAAC,OAAO,EAAG,cAAc,IACjC,OAAO,CACG,CACf,CAAC;SACH;QAED,OAAO,CACL,6BAAK,SAAS,EAAG,eAAG,CAAC,mBAAmB,EAAE,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAG,GAAG,EAAG,OAAO,EAAG,GAAG,EAAG,OAAO,IAClG,OAAO,CACL,CACP,CAAC;IACJ,CAAC;IAEO,gCAAW,GAAnB,UAAoB,IAAyB;QAC3C,wEAAwE;QACxE,IAAM,SAAS,GAAe,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAC9D,QAAQ,EAAE,IAAI,CAAC,IAAI;SACpB,CAAC;QACF,sDAAsD;QACtD,IAAM,kBAAkB,GAAG,SAAS,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,8BAA8B,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC;QACxH,IAAM,aAAa,GAAG,eAAG,CAAC,wBAAwB,EAAE,MAAM,CAAC,QAAQ,EAAE,kBAAkB,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC;QAE9G,OAAO,oBAAC,WAAI,uBAAM,SAAS,IAAG,SAAS,EAAG,aAAa,IAAK,CAAC;IAC/D,CAAC;IAEO,kCAAa,GAArB;QAAA,iBAKC;QAJC,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC;YAChC,KAAI,CAAC,uBAAuB,EAAE,CAAC;YAC/B,KAAI,CAAC,oBAAoB,EAAE,CAAC;QAC9B,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,4CAAuB,GAA/B;QACE,2FAA2F;QAC3F,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE;YAC3F,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;SACtC;aAAM;YACL,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;SACzB;QAED,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;YAC5B,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;SAC9B;QAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChD,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAEjC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;gBACtC,IAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAgB,CAAC;gBAE9C,IAAI,EAAE,EAAE;oBACN,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,qBAAqB,EAAE,CAAC,KAAK,CAAC;iBACtE;aACF;SACF;IACH,CAAC;IAEO,yCAAoB,GAA5B;QACQ,IAAA,eAAwD,EAAtD,gBAAK,EAAE,gCAAa,EAAE,wCAAiB,CAAgB;QAC/D,IAAM,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC;QACpD,IAAM,iBAAiB,GAAG,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC;QAC1D,IAAM,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC;QACxD,IAAM,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;QAClD,IAAM,aAAa,GAAO,KAAK,QAAC,CAAC;QACjC,IAAI,qBAAqB,GAAG,aAAa,CAAC;QAC1C,IAAI,aAAa,GAAG,CAAC,CAAC;QACtB,IAAM,iBAAiB,GAAG,aAAa,IAAI,aAAa,CAAC,MAAM,CAAC;QAEhE,IAAI,CAAC,cAAc,IAAI,CAAC,gBAAgB,EAAE;YACxC,OAAO;SACR;QAED,IAAM,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC;QACtD,IAAI,cAAc,GAAG,gBAAgB,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,CAAC,UAAW,EAAE,EAAE,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,WAAY,EAAE,EAAE,CAAC,CAAC;QACvH,IAAI,aAAa,EAAE;YACjB,cAAc,IAAI,aAAa,CAAC,qBAAqB,EAAE,CAAC,KAAK,CAAC;SAC/D;QACD,IAAI,iBAAiB,EAAE;YACrB,cAAc,IAAI,iBAAiB,CAAC,qBAAqB,EAAE,CAAC,KAAK,CAAC;SACnE;QAED,IAAI,iBAAiB,EAAE;YACrB,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC;SACvC;QAED,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;YAC5B,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,OAAO;SACR;QAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAM,IAAI,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAM,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAEpD,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC,IAAI,cAAc,EAAE;gBACjD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC,GAAG,cAAc,EAAE;oBACpF,CAAC,EAAE,CAAC;iBACL;gBAED,qBAAqB,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,aAAc,CAAC,CAAC;gBACvE,MAAM;aACP;iBAAM;gBACL,aAAa,IAAI,SAAS,CAAC;aAC5B;SAEF;QAED,IAAM,2BAA2B,GAAG,IAAI,CAAC,kCAAkC,CACvE,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAiB,CAAC,EAClD,qBAAsB,EACtB,iBAAkB,CACnB,CAAC;QAEJ,IAAI,CAAC,QAAQ,CAAC;YACZ,aAAa,EAAE,aAAa;YAC5B,qBAAqB,EAAE,qBAAqB;YAC5C,mBAAmB,EAAE,2BAA2B,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC,CAAC,SAAS;YAC7F,mBAAmB,EAAE,2BAA4B;YACjD,oBAAoB,EAAE,2BAA2B,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC,CAAC,SAAS;SAChG,CAAC,CAAC;IACL,CAAC;IAEO,iCAAY,GAApB,UAAqB,IAAyB;QAA9C,iBAoBC;QAnBC,OAAO,UAAC,EAAuC;YAC7C,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,OAAO;aACR;YAED,IAAI,IAAI,CAAC,GAAG,KAAK,KAAI,CAAC,KAAK,CAAC,mBAAmB,IAAI,CAAC,kBAAU,CAAC,IAAI,CAAC,EAAE;gBACpE,KAAI,CAAC,qBAAqB,EAAE,CAAC;aAC9B;iBAAM;gBACL,KAAI,CAAC,QAAQ,CAAC;oBACZ,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,EAAE;oBACnC,mBAAmB,EAAE,IAAI,CAAC,GAAG;oBAC7B,mBAAmB,EAAE,KAAI,CAAC,+BAA+B,CAAC,IAAI,CAAC;oBAC/D,oBAAoB,EAAE,EAAE,CAAC,aAAa;iBACvC,CAAC,CAAC;aACJ;YACD,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;aACxB;QACH,CAAC,CAAC;IACJ,CAAC;IAoCO,uCAAkB,GAA1B,UAA2B,SAA2B;QACpD,OAAO;YACL,aAAa,EAAE,SAAS,CAAC,KAAK,IAAI,EAAE;YACpC,mBAAmB,EAAE,IAAI,CAAC,kCAAkC,CAC1D,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,QAAS,CAAC,EAC3C,SAAS,CAAC,aAAc,EACxB,SAAS,CAAC,iBAAkB,CAAE;YAChC,gBAAgB,EAAE,SAAS,CAAC,QAAQ,IAAI,SAAS;SAClD,CAAC;IACJ,CAAC;IAEO,uDAAkC,GAA1C,UAA2C,aAAoC,EAAE,aAAoC,EAAE,iBAAgD;QAAvK,iBAgBC;QAfC,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,mBAAmB,EAAE;YAChD,IAAI,IAAI,CAAC,KAAK,CAAC,mBAAmB,KAAK,YAAY,EAAE;gBACnD,8BAA8B;gBAC9B,4BAAY,iBAAiB,IAAE,KAAK,EAAE,aAAa,IAAG;aACvD;iBAAM;gBACL,+CAA+C;gBAC/C,IAAM,YAAY,GAAG,aAAa,CAAC,MAAM,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,GAAG,KAAK,KAAI,CAAC,KAAK,CAAC,mBAAmB,EAA3C,CAA2C,CAAC,CAAC;gBAE/F,IAAI,YAAY,CAAC,MAAM,KAAK,CAAC,EAAE;oBAC7B,OAAO,IAAI,CAAC,+BAA+B,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;iBAC9D;aACF;SACF;QAED,OAAO;IACT,CAAC;IAEO,oDAA+B,GAAvC,UAAwC,IAAyB;QAC/D,OAAO,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;IACpE,CAAC;IAvea,uBAAY,GAAqB;QAC7C,KAAK,EAAE,EAAE;QACT,aAAa,EAAE,EAAE;QACjB,QAAQ,EAAE,EAAE;KACb,CAAC;IAoeJ,iBAAC;CAAA,AAzeD,CAAgC,yBAAa,GAye5C;AAzeY,gCAAU","sourcesContent":["import * as React from 'react';\nimport {\n  BaseComponent,\n  buttonProperties,\n  anchorProperties,\n  css,\n  divProperties,\n  getId,\n  getNativeProps\n} from '../../Utilities';\nimport { ICommandBar, ICommandBarProps, ICommandBarItemProps } from './CommandBar.types';\nimport { IFocusZone, FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { ContextualMenu, IContextualMenuProps, IContextualMenuItem } from '../../ContextualMenu';\nimport { hasSubmenu } from '../../utilities/contextualMenu/index';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport {\n  Icon,\n  IIconProps\n} from '../../Icon';\nimport { FontClassNames } from '../../Styling';\nimport { TooltipHost } from '../../Tooltip';\nimport * as stylesImport from './CommandBar.scss';\nimport { createRef } from '../../Utilities';\nimport { KeytipData } from '../../KeytipData';\n\nconst styles: any = stylesImport;\n\nconst OVERFLOW_KEY = 'overflow';\nconst OVERFLOW_WIDTH = 41.5;\n\nexport interface ICommandBarState {\n  renderedItems?: IContextualMenuItem[];\n  renderedOverflowItems?: IContextualMenuItem[];\n  expandedMenuItemKey?: string;\n  expandedMenuId?: string;\n  contextualMenuProps?: IContextualMenuProps;\n  contextualMenuTarget?: HTMLElement;\n  renderedFarItems?: IContextualMenuItem[];\n}\n\nexport class CommandBar extends BaseComponent<ICommandBarProps, ICommandBarState> implements ICommandBar {\n  public static defaultProps: ICommandBarProps = {\n    items: [],\n    overflowItems: [],\n    farItems: []\n  };\n\n  public refs: {\n    [key: string]: React.ReactInstance;\n  };\n\n  private _searchSurface = createRef<HTMLDivElement>();\n  private _commandSurface = createRef<HTMLDivElement>();\n  private _commandBarRegion = createRef<HTMLDivElement>();\n  private _farCommandSurface = createRef<HTMLDivElement>();\n  private _focusZone = createRef<IFocusZone>();\n  private _overflow = createRef<HTMLDivElement>();\n\n  private _id: string;\n  private _overflowWidth: number;\n  private _commandItemWidths: { [key: string]: number } | null;\n\n  constructor(props: ICommandBarProps) {\n    super(props);\n\n    this.state = this._getStateFromProps(props);\n\n    this._id = getId('CommandBar');\n  }\n\n  public componentDidMount(): void {\n    // Asynchronously update command bar layout to eliminate forced synchronous reflow\n    this._asyncMeasure();\n    this._events.on(window, 'resize', this._updateRenderedItems);\n  }\n\n  public componentWillReceiveProps(nextProps: ICommandBarProps): void {\n    this.setState(this._getStateFromProps(nextProps));\n    this._commandItemWidths = null;\n  }\n\n  public componentDidUpdate(prevProps: ICommandBarProps, prevStates: ICommandBarState) {\n    if (!this._commandItemWidths) {\n      // Asynchronously update command bar layout to eliminate forced synchronous reflow\n      this._asyncMeasure();\n    }\n  }\n\n  public render(): JSX.Element {\n    const { isSearchBoxVisible, searchPlaceholderText, className } = this.props;\n    const { renderedItems, contextualMenuProps, expandedMenuItemKey, expandedMenuId, renderedOverflowItems, contextualMenuTarget, renderedFarItems } = this.state;\n    let searchBox;\n\n    if (isSearchBoxVisible) {\n      searchBox = (\n        <div className={ css('ms-CommandBarSearch', styles.search) } ref={ this._searchSurface }>\n          <input className={ css('ms-CommandBarSearch-input', styles.searchInput) } type='text' placeholder={ searchPlaceholderText } />\n          <div\n            className={ css(\n              'ms-CommandBarSearch-iconWrapper ms-CommandBarSearch-iconSearchWrapper',\n              styles.searchIconWrapper, styles.searchIconSearchWrapper) }\n          >\n            { <Icon iconName={ 'Search' } /> }\n          </div>\n          <div\n            className={ css(\n              'ms-CommandBarSearch-iconWrapper ms-CommandBarSearch-iconClearWrapper',\n              FontClassNames.small,\n              styles.searchIconWrapper,\n              styles.searchIconClearWrapper\n            ) }\n          >\n            <Icon iconName='cancel' />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className={ css('ms-CommandBar', styles.root, className) } ref={ this._commandBarRegion }>\n        { searchBox }\n        <FocusZone componentRef={ this._focusZone } className={ styles.container } direction={ FocusZoneDirection.horizontal } role='menubar' >\n          <div className={ css('ms-CommandBar-primaryCommands', styles.primaryCommands) } ref={ this._commandSurface }>\n            { renderedItems!.map(item => (\n              this._renderItemInCommandBar(item, expandedMenuItemKey!)\n            )).concat((renderedOverflowItems && renderedOverflowItems.length) ? [\n              <div className={ css('ms-CommandBarItem', styles.item) } key={ OVERFLOW_KEY } ref={ this._overflow }>\n                <button\n                  type='button'\n                  id={ this._id + OVERFLOW_KEY }\n                  className={ css('ms-CommandBarItem-link', styles.itemLink, {\n                    ['is-expanded ' + styles.itemLinkIsExpanded]: (expandedMenuItemKey === OVERFLOW_KEY)\n                  }) }\n                  onClick={ this._onOverflowClick }\n                  role='menuitem'\n                  aria-expanded={ this.state.expandedMenuItemKey === OVERFLOW_KEY }\n                  aria-label={ this.props.elipisisAriaLabel || '' }\n                  aria-haspopup={ true }\n                  data-automation-id='commandBarOverflow'\n                >\n                  <Icon className={ css('ms-CommandBarItem-overflow', styles.itemOverflow) } iconName='more' />\n                </button>\n              </div>\n            ] : []) }\n          </div>\n          <div className={ css('ms-CommandBar-sideCommands', styles.sideCommands) } ref={ this._farCommandSurface }>\n            { renderedFarItems!.map(item => (\n              this._renderItemInCommandBar(item, expandedMenuItemKey!, true)\n            )) }\n          </div>\n        </FocusZone>\n        { (contextualMenuProps) ?\n          (<ContextualMenu\n            className={ 'ms-CommandBar-menuHost' }\n            directionalHint={ DirectionalHint.bottomAutoEdge }\n            { ...contextualMenuProps }\n            target={ contextualMenuTarget }\n            labelElementId={ expandedMenuId }\n            onDismiss={ this._onContextMenuDismiss }\n          />\n          ) : (null)\n        }\n      </div >\n    );\n  }\n\n  public focus() {\n    const { current: focusZone } = this._focusZone;\n    focusZone && focusZone.focus();\n  }\n\n  private _renderItemInCommandBar(item: ICommandBarItemProps, expandedMenuItemKey: string, isFarItem?: boolean): JSX.Element {\n    if (item.onRender) {\n      return (\n        <div className={ css('ms-CommandBarItem', styles.item, item.className) } key={ item.key } ref={ item.key }>\n          { item.onRender(item, this._onContextMenuDismiss) }\n        </div>\n      );\n    }\n\n    const itemKey = item.key;\n    const isLink = item.onClick || hasSubmenu(item);\n    const className = css(\n      isLink ? ('ms-CommandBarItem-link ' + styles.itemLink) : ('ms-CommandBarItem-text ' + styles.itemText),\n      !item.name && ('ms-CommandBarItem--noName ' + styles.itemLinkIsNoName),\n      (expandedMenuItemKey === item.key) && ('is-expanded ' + styles.itemLinkIsExpanded),\n      item.inactive ? styles.inactive : ''\n    );\n\n    let tooltipContent = '';\n\n    if (item.title) {\n      tooltipContent = item.title;\n    }\n\n    const hasIcon = !!item.icon || !!item.iconProps;\n    const isNameVisible = !!item.name && !item.iconOnly;\n    const ariaLabel = item.ariaLabel || (item.iconOnly ? item.name : undefined);\n    const itemHasSubmenu = hasSubmenu(item);\n    let { keytipProps } = item;\n    if (keytipProps && itemHasSubmenu) {\n      keytipProps = {\n        ...keytipProps,\n        hasMenu: true\n      };\n    }\n\n    let command: React.ReactNode;\n    if (item.href) {\n      // Allow the disabled property on anchor elements for commandbar\n      const nativeProps = getNativeProps(item, anchorProperties.concat(['disabled']));\n      command = (\n        <KeytipData\n          keytipProps={ keytipProps }\n          ariaDescribedBy={ (nativeProps as any)['aria-describedby'] }\n          disabled={ item.disabled }\n        >\n          { (keytipAttributes: any): JSX.Element => (\n            <a\n              { ...nativeProps }\n              { ...keytipAttributes }\n              id={ this._id + item.key }\n              className={ className }\n              href={ item.disabled ? undefined : item.href }\n              onClick={ this._onItemClick(item) }\n              title={ '' }\n              aria-disabled={ item.inactive }\n              data-command-key={ itemKey }\n              aria-haspopup={ itemHasSubmenu }\n              role='menuitem'\n              aria-label={ ariaLabel }\n            >\n              { (hasIcon) ? this._renderIcon(item) : (null) }\n              { isNameVisible && (\n                <span\n                  className={ css('ms-CommandBarItem-commandText', styles.itemCommandText) }\n                >\n                  { item.name }\n                </span>\n              ) }\n            </a>\n          ) }\n        </KeytipData>\n      );\n    } else if (isLink) {\n      const nativeProps = getNativeProps(item, buttonProperties);\n      command = (\n        <KeytipData\n          keytipProps={ keytipProps }\n          ariaDescribedBy={ (nativeProps as any)['aria-describedby'] }\n          disabled={ item.disabled }\n        >\n          { (keytipAttributes: any): JSX.Element => (\n            <button\n              { ...nativeProps }\n              { ...keytipAttributes }\n              id={ this._id + item.key }\n              className={ className }\n              onClick={ this._onItemClick(item) }\n              title={ '' }\n              aria-disabled={ item.inactive }\n              data-command-key={ itemKey }\n              aria-haspopup={ itemHasSubmenu }\n              aria-expanded={ itemHasSubmenu ? expandedMenuItemKey === item.key : undefined }\n              role='menuitem'\n              aria-label={ ariaLabel }\n            >\n              { (hasIcon) ? this._renderIcon(item) : (null) }\n              { isNameVisible && (\n                <span\n                  className={ css('ms-CommandBarItem-commandText', styles.itemCommandText) }\n                >\n                  { item.name }\n                </span>\n              ) }\n              { itemHasSubmenu ? (\n                <Icon className={ css('ms-CommandBarItem-chevronDown', styles.itemChevronDown) } iconName='ChevronDown' />\n              ) : (null) }\n            </button>\n          )\n          }\n        </KeytipData >\n      );\n    } else {\n      // Allow the disabled property on div elements for commandbar\n      const nativeProps = getNativeProps(item, divProperties.concat(['disabled']));\n      command = (\n        <div\n          { ...nativeProps }\n          id={ this._id + item.key }\n          className={ className }\n          title={ '' }\n          aria-disabled={ item.inactive }\n          data-command-key={ itemKey }\n          aria-haspopup={ itemHasSubmenu }\n          aria-label={ ariaLabel }\n        >\n          { (hasIcon) ? this._renderIcon(item) : (null) }\n          { (isNameVisible) && (\n            <span\n              className={ css('ms-CommandBarItem-commandText', styles.itemCommandText) }\n              aria-hidden='true'\n              role='presentation'\n            >\n              { item.name }\n            </span>\n          ) }\n        </div>\n      );\n    }\n\n    if (item.iconOnly && item.name) {\n      command = (\n        <TooltipHost content={ item.name }>\n          { command }\n        </TooltipHost>\n      );\n    } else if (tooltipContent) {\n      command = (\n        <TooltipHost content={ tooltipContent }>\n          { command }\n        </TooltipHost>\n      );\n    }\n\n    return (\n      <div className={ css('ms-CommandBarItem', styles.item, item.className) } key={ itemKey } ref={ itemKey }>\n        { command }\n      </div>\n    );\n  }\n\n  private _renderIcon(item: IContextualMenuItem): JSX.Element {\n    // Only present to allow continued use of item.icon which is deprecated.\n    const iconProps: IIconProps = item.iconProps ? item.iconProps : {\n      iconName: item.icon\n    };\n    // Use the default icon color for the known icon names\n    const iconColorClassName = iconProps.iconName === 'None' ? '' : ('ms-CommandBarItem-iconColor ' + styles.itemIconColor);\n    const iconClassName = css('ms-CommandBarItem-icon', styles.itemIcon, iconColorClassName, iconProps.className);\n\n    return <Icon { ...iconProps } className={ iconClassName } />;\n  }\n\n  private _asyncMeasure(): void {\n    this._async.requestAnimationFrame(() => {\n      this._updateItemMeasurements();\n      this._updateRenderedItems();\n    });\n  }\n\n  private _updateItemMeasurements(): void {\n    // the generated width for overflow is 35 in chrome, 38 in IE, but the actual value is 41.5\n    if (this._overflow.current || (this.props.overflowItems && this.props.overflowItems.length)) {\n      this._overflowWidth = OVERFLOW_WIDTH;\n    } else {\n      this._overflowWidth = 0;\n    }\n\n    if (!this._commandItemWidths) {\n      this._commandItemWidths = {};\n    }\n\n    for (let i = 0; i < this.props.items.length; i++) {\n      const item = this.props.items[i];\n\n      if (!this._commandItemWidths[item.key]) {\n        const el = this.refs[item.key] as HTMLElement;\n\n        if (el) {\n          this._commandItemWidths[item.key] = el.getBoundingClientRect().width;\n        }\n      }\n    }\n  }\n\n  private _updateRenderedItems(): void {\n    const { items, overflowItems, overflowMenuProps } = this.props;\n    const commandSurface = this._commandSurface.current;\n    const farCommandSurface = this._farCommandSurface.current;\n    const commandBarRegion = this._commandBarRegion.current;\n    const searchSurface = this._searchSurface.current;\n    const renderedItems = [...items];\n    let renderedOverflowItems = overflowItems;\n    let consumedWidth = 0;\n    const isOverflowVisible = overflowItems && overflowItems.length;\n\n    if (!commandSurface || !commandBarRegion) {\n      return;\n    }\n\n    const style = window.getComputedStyle(commandSurface);\n    let availableWidth = commandBarRegion.clientWidth - parseInt(style.marginLeft!, 10) - parseInt(style.marginRight!, 10);\n    if (searchSurface) {\n      availableWidth -= searchSurface.getBoundingClientRect().width;\n    }\n    if (farCommandSurface) {\n      availableWidth -= farCommandSurface.getBoundingClientRect().width;\n    }\n\n    if (isOverflowVisible) {\n      availableWidth -= this._overflowWidth;\n    }\n\n    if (!this._commandItemWidths) {\n      this._asyncMeasure();\n      return;\n    }\n\n    for (let i = 0; i < renderedItems.length; i++) {\n      const item = renderedItems[i];\n      const itemWidth = this._commandItemWidths[item.key];\n\n      if ((consumedWidth + itemWidth) >= availableWidth) {\n        if (i > 0 && !isOverflowVisible && (availableWidth - consumedWidth) < OVERFLOW_WIDTH) {\n          i--;\n        }\n\n        renderedOverflowItems = renderedItems.splice(i).concat(overflowItems!);\n        break;\n      } else {\n        consumedWidth += itemWidth;\n      }\n\n    }\n\n    const renderedContextualMenuProps = this._getContextualMenuPropsAfterUpdate(\n        renderedItems.concat(this.state.renderedFarItems!),\n        renderedOverflowItems!,\n        overflowMenuProps!\n      );\n\n    this.setState({\n      renderedItems: renderedItems,\n      renderedOverflowItems: renderedOverflowItems,\n      expandedMenuItemKey: renderedContextualMenuProps ? this.state.expandedMenuItemKey : undefined,\n      contextualMenuProps: renderedContextualMenuProps!,\n      contextualMenuTarget: renderedContextualMenuProps ? this.state.contextualMenuTarget : undefined\n    });\n  }\n\n  private _onItemClick(item: IContextualMenuItem): (ev: React.MouseEvent<HTMLButtonElement | HTMLAnchorElement>) => void {\n    return (ev: React.MouseEvent<HTMLButtonElement>): void => {\n      if (item.inactive) {\n        return;\n      }\n\n      if (item.key === this.state.expandedMenuItemKey || !hasSubmenu(item)) {\n        this._onContextMenuDismiss();\n      } else {\n        this.setState({\n          expandedMenuId: ev.currentTarget.id,\n          expandedMenuItemKey: item.key,\n          contextualMenuProps: this._getContextualMenuPropsFromItem(item),\n          contextualMenuTarget: ev.currentTarget\n        });\n      }\n      if (item.onClick) {\n        item.onClick(ev, item);\n      }\n    };\n  }\n\n  private _onOverflowClick = (ev: React.MouseEvent<HTMLButtonElement>) => {\n    if (this.state.expandedMenuItemKey === OVERFLOW_KEY) {\n      this._onContextMenuDismiss();\n    } else {\n      this.setState({\n        expandedMenuId: ev.currentTarget.id,\n        expandedMenuItemKey: OVERFLOW_KEY,\n        contextualMenuProps: { ...this.props.overflowMenuProps!, items: this.state.renderedOverflowItems! },\n        contextualMenuTarget: ev.currentTarget\n      });\n    }\n  }\n\n  private _onContextMenuDismiss = (ev?: any) => {\n    const { current: commandSurface } = this._commandSurface;\n\n    if (!ev || !ev.relatedTarget || commandSurface && !commandSurface.contains(ev.relatedTarget as HTMLElement)) {\n      const { contextualMenuProps } = this.state;\n\n      if (contextualMenuProps && contextualMenuProps.onDismiss) {\n        contextualMenuProps!.onDismiss!(ev);\n      }\n\n      this.setState({\n        expandedMenuItemKey: undefined,\n        contextualMenuProps: undefined,\n        contextualMenuTarget: undefined\n      });\n    } else {\n      ev.stopPropagation();\n      ev.preventDefault();\n    }\n  }\n\n  private _getStateFromProps(nextProps: ICommandBarProps): ICommandBarState {\n    return {\n      renderedItems: nextProps.items || [],\n      contextualMenuProps: this._getContextualMenuPropsAfterUpdate(\n        nextProps.items.concat(nextProps.farItems!),\n        nextProps.overflowItems!,\n        nextProps.overflowMenuProps!)!,\n      renderedFarItems: nextProps.farItems || undefined\n    };\n  }\n\n  private _getContextualMenuPropsAfterUpdate(renderedItems: IContextualMenuItem[], overflowItems: IContextualMenuItem[], overflowMenuProps: Partial<IContextualMenuProps>): IContextualMenuProps | undefined {\n    if (this.state && this.state.expandedMenuItemKey) {\n      if (this.state.expandedMenuItemKey === OVERFLOW_KEY) {\n        // Keep the overflow menu open\n        return { ...overflowMenuProps, items: overflowItems };\n      } else {\n        // Find the currently open key in the new props\n        const matchingItem = renderedItems.filter(item => item.key === this.state.expandedMenuItemKey);\n\n        if (matchingItem.length === 1) {\n          return this._getContextualMenuPropsFromItem(matchingItem[0]);\n        }\n      }\n    }\n\n    return;\n  }\n\n  private _getContextualMenuPropsFromItem(item: IContextualMenuItem): IContextualMenuProps | undefined {\n    return item.subMenuProps || (item.items && { items: item.items });\n  }\n}\n"]}